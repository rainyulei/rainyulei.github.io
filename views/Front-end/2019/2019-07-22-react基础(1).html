<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React-基础（一） | Y Lei&#39;S Blog</title>
    <meta name="description" content="React">
    <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="keywords" content="React">
    <link rel="preload" href="/assets/css/0.styles.ad66585c.css" as="style"><link rel="preload" href="/assets/js/app.565ad12a.js" as="script"><link rel="preload" href="/assets/js/4.ed939ccf.js" as="script"><link rel="preload" href="/assets/js/1.0b802b94.js" as="script"><link rel="preload" href="/assets/js/30.c9db3a1b.js" as="script"><link rel="prefetch" href="/assets/js/10.8cce62b7.js"><link rel="prefetch" href="/assets/js/11.130790c6.js"><link rel="prefetch" href="/assets/js/12.3d9f9702.js"><link rel="prefetch" href="/assets/js/13.c7d9d8f6.js"><link rel="prefetch" href="/assets/js/14.0456630e.js"><link rel="prefetch" href="/assets/js/15.e33dd41d.js"><link rel="prefetch" href="/assets/js/16.382c9bcd.js"><link rel="prefetch" href="/assets/js/17.18e1a90e.js"><link rel="prefetch" href="/assets/js/18.f5d5c127.js"><link rel="prefetch" href="/assets/js/19.55621491.js"><link rel="prefetch" href="/assets/js/20.f4ab203f.js"><link rel="prefetch" href="/assets/js/21.b3f1dd79.js"><link rel="prefetch" href="/assets/js/22.a4769bbd.js"><link rel="prefetch" href="/assets/js/23.a3108ef1.js"><link rel="prefetch" href="/assets/js/24.455c5906.js"><link rel="prefetch" href="/assets/js/25.3b08ed65.js"><link rel="prefetch" href="/assets/js/26.98348e29.js"><link rel="prefetch" href="/assets/js/27.50ded5ec.js"><link rel="prefetch" href="/assets/js/28.b5ff8778.js"><link rel="prefetch" href="/assets/js/29.274f94db.js"><link rel="prefetch" href="/assets/js/31.603f2f81.js"><link rel="prefetch" href="/assets/js/32.b2840a37.js"><link rel="prefetch" href="/assets/js/33.fd1960f2.js"><link rel="prefetch" href="/assets/js/34.5734f5e1.js"><link rel="prefetch" href="/assets/js/35.537cc99c.js"><link rel="prefetch" href="/assets/js/36.9a7531ad.js"><link rel="prefetch" href="/assets/js/37.a3aece7e.js"><link rel="prefetch" href="/assets/js/38.b148e348.js"><link rel="prefetch" href="/assets/js/39.b545f40f.js"><link rel="prefetch" href="/assets/js/40.fb5f0a0e.js"><link rel="prefetch" href="/assets/js/41.15aa988a.js"><link rel="prefetch" href="/assets/js/42.41575e65.js"><link rel="prefetch" href="/assets/js/43.94c84e7c.js"><link rel="prefetch" href="/assets/js/44.584661fb.js"><link rel="prefetch" href="/assets/js/5.61cadc21.js"><link rel="prefetch" href="/assets/js/6.51c4d940.js"><link rel="prefetch" href="/assets/js/7.b5260bec.js"><link rel="prefetch" href="/assets/js/8.61073b5c.js"><link rel="prefetch" href="/assets/js/9.4a046adc.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.2553b2f0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ad66585c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container"><div><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/avatar-300px.png" alt="Y Lei'S Blog" class="logo"> <span class="site-name">Y Lei'S Blog</span></a> <div class="links"><div class="color-picker"><a href="#" class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox" checked="checked"></div></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/category/Front-End.html" class="nav-link"><i class="iconfont reco-blog"></i>
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Library
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/other/My favourite.html" class="nav-link"><i class="iconfont iconfontMy icon-tubiaoshezhixihuandeinhuo"></i>
  My Favourite
</a></li><li class="dropdown-item"><!----> <a href="/views/other/Interview question.html" class="nav-link"><i class="iconfont iconfontMy icon---copy"></i>
  Interview Question
</a></li><li class="dropdown-item"><!----> <a href="https://yu-lei.gitbook.io/notes/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-book"></i>
  Notes
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/Tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/views/other/guide.html" class="nav-link"><i class="iconfont reco-account"></i>
  My CV
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/rainyulei" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.linkedin.com/in/yu-lei-42827a17b/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-linkedin"></i>
  linkedin
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/ha-ha-ha-he-he-he-39/activities" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-zhihu"></i>
  Zhihu
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/category/Front-End.html" class="nav-link"><i class="iconfont reco-blog"></i>
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Library
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/other/My favourite.html" class="nav-link"><i class="iconfont iconfontMy icon-tubiaoshezhixihuandeinhuo"></i>
  My Favourite
</a></li><li class="dropdown-item"><!----> <a href="/views/other/Interview question.html" class="nav-link"><i class="iconfont iconfontMy icon---copy"></i>
  Interview Question
</a></li><li class="dropdown-item"><!----> <a href="https://yu-lei.gitbook.io/notes/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-book"></i>
  Notes
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/Tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/views/other/guide.html" class="nav-link"><i class="iconfont reco-account"></i>
  My CV
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/rainyulei" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.linkedin.com/in/yu-lei-42827a17b/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-linkedin"></i>
  linkedin
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/ha-ha-ha-he-he-he-39/activities" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-zhihu"></i>
  Zhihu
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>React-基础（一）</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_1-安装" class="sidebar-link">1 安装</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_2-主要方法" class="sidebar-link">2 主要方法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_3-jsx" class="sidebar-link">3 jsx</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#在react中有两种括号" class="sidebar-link">在react中有两种括号</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#react的-底层渲染原理" class="sidebar-link">React的 底层渲染原理</a></li></ul></li><li><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_4-组件" class="sidebar-link">4 组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_4-0-1-创建组件的第一种方式-函数式" class="sidebar-link">4.0.1 创建组件的第一种方式 函数式</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_4-0-2-使用-class-关键字" class="sidebar-link">4.0.2 使用 class 关键字</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_4-0-3-class-创建组件的状态" class="sidebar-link">4.0.3 class 创建组件的状态</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_4-0-4-父子组件的基本构造" class="sidebar-link">4.0.4 父子组件的基本构造</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_4-0-5-默认导入的-css-样式表是全局生效" class="sidebar-link">4.0.5 默认导入的 Css 样式表是全局生效</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_4-0-6-条件渲染" class="sidebar-link">4.0.6 条件渲染</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_4-0-7-组件中的-list-和-key" class="sidebar-link">4.0.7 组件中的 list 和 key</a></li></ul></li><li><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_5、react-的事件" class="sidebar-link">5、react 的事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_5-0-1-在-react-中事件绑定规则" class="sidebar-link">5.0.1 在 react 中事件绑定规则</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_5-0-2-事件绑定传参" class="sidebar-link">5.0.2 事件绑定传参</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_5-0-3-阻止默认事件" class="sidebar-link">5.0.3 阻止默认事件</a></li></ul></li><li><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_6、react-的状态管理" class="sidebar-link">6、react 的状态管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_6-0-1-修改-state-状态" class="sidebar-link">6.0.1 修改 state 状态</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_6-0-2-state-的批量更新" class="sidebar-link">6.0.2 state 的批量更新</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_6-0-3-文本框的-state-改变" class="sidebar-link">6.0.3 文本框的 state 改变</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_6-0-4-如何返回状态值" class="sidebar-link">6.0.4 如何返回状态值</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_6-0-5-form-表单" class="sidebar-link">6.0.5 Form 表单</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_6-0-6-非受控组件" class="sidebar-link">6.0.6 非受控组件</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_6-0-7-dangerroussetinnerhtml-富文本编辑器" class="sidebar-link">6.0.7 dangerrousSetInnerHTML 富文本编辑器</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_6-0-8-扩展传递参数语法" class="sidebar-link">6.0.8 {... }扩展传递参数语法</a></li></ul></li><li><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7、组件的生命周期" class="sidebar-link">7、组件的生命周期</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7-0-1-props-值初始化" class="sidebar-link">7.0.1 props 值初始化</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7-0-2-组件的创建阶段" class="sidebar-link">7.0.2 组件的创建阶段</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7-0-3-组件的运行阶段" class="sidebar-link">7.0.3 组件的运行阶段</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7-0-4-组件的销毁阶段" class="sidebar-link">7.0.4 组件的销毁阶段</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7-0-5-props-传递的校验和初始值设定" class="sidebar-link">7.0.5 props 传递的校验和初始值设定</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7-0-6-16-4版本之后已移除componentwillmount-钩子函数" class="sidebar-link">7.0.6  16.4版本之后已移除~~componentWillmount 钩子函数~~</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7-0-7-render-函数" class="sidebar-link">7.0.7 render 函数</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7-0-8-componentdidmount（）钩子函数" class="sidebar-link">7.0.8 componentDidMount（）钩子函数</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7-0-9shouldcomponentupdate（nextprops，nextstate）-钩子函数" class="sidebar-link">7.0.9shouldComponentUpdate（nextProps，nextState） 钩子函数</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7-1-0-16-4版本以后以移除componentwillupdate（nextprops，nextstate）钩子函数" class="sidebar-link">7.1.0 16.4版本以后以移除~~componentWillUpdate（nextProps，nextState）钩子函数~~</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7-1-1-componentdidupdate（prexprops，prevstate）-钩子函数" class="sidebar-link">7.1.1 componentDidUpdate（prexProps，prevState） 钩子函数</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7-1-2-16-4版本以后以移除componentwillreceiveprops-nextprops" class="sidebar-link">7.1.2 16.4版本以后以移除~~componentWillReceiveProps(nextProps)~~</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7-1-3-钩子函数中的参数列表" class="sidebar-link">7.1.3 钩子函数中的参数列表</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_7-1-4-16-4-新增的生命周期函数" class="sidebar-link">7.1.4 16.4 新增的生命周期函数</a></li></ul></li><li><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_8、react-中的函数的-this-指向改变" class="sidebar-link">8、react 中的函数的 this 指向改变</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_8-0-1-使用箭头函数改变-this-指向" class="sidebar-link">8.0.1 使用箭头函数改变 this 指向</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_8-0-2-使用-bind-重置-this" class="sidebar-link">8.0.2 使用 bind 重置 this</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_8-0-3-在构造函数中绑定-this-并传参" class="sidebar-link">8.0.3 在构造函数中绑定 this 并传参</a></li></ul></li><li><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_9、context-特性-上下文" class="sidebar-link">9、context 特性(上下文)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_9-1-16-8版本-之前的-context-特性" class="sidebar-link">9.1 16.8版本 之前的 context 特性</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_9-2-传递方法给子组件-让子组件可以修改父组件的状态" class="sidebar-link">9.2 传递方法给子组件 让子组件可以修改父组件的状态</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_9-3-16-8-版本之后的context使用" class="sidebar-link">9.3 16.8 版本之后的context使用</a></li></ul></li><li><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_10、-动画" class="sidebar-link">10、 动画</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_10-1-classname-配合-css-实现动画" class="sidebar-link">10.1 className 配合 css 实现动画</a></li><li class="sidebar-sub-header"><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_10-2-使用了动画过度库-react-transition-group" class="sidebar-link">10.2 使用了动画过度库'react-transition-group'</a></li></ul></li><li><a href="/views/Front-end/2019/2019-07-22-react%E5%9F%BA%E7%A1%80(1).html#_11、react-的项目结构" class="sidebar-link">11、React 的项目结构</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page reco-hide"> <div class="page-title"><h1>React-基础（一）</h1> <hr> <div data-v-b53d65a4><i class="iconfont reco-account" data-v-b53d65a4><span data-v-b53d65a4>Yu Lei</span></i> <i class="iconfont reco-date" data-v-b53d65a4><span data-v-b53d65a4>2019-3-18</span></i> <!----> <i class="iconfont reco-tag tags" data-v-b53d65a4><span class="tag-item" data-v-b53d65a4>
      React
    </span></i></div></div> <div class="content__default"><h1 id="react-基础-学习笔记（一）"><a href="#react-基础-学习笔记（一）" aria-hidden="true" class="header-anchor">#</a> React-基础-学习笔记（一）</h1> <h2 id="_1-安装"><a href="#_1-安装" aria-hidden="true" class="header-anchor">#</a> 1 安装</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>npm i react react<span class="token operator">-</span>dom <span class="token operator">-</span><span class="token constant">S</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>react 核心包 创建虚拟 dom</p> <p>react-dom 展现在界面上</p> <h2 id="_2-主要方法"><a href="#_2-主要方法" aria-hidden="true" class="header-anchor">#</a> 2 主要方法</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//创建一个  虚拟DOM</span>
<span class="token comment">//参数1 标签</span>
<span class="token comment">//参数2 属性对象</span>
<span class="token comment">//参数3  子节点名称</span>
<span class="token comment">//参数4  子节点属性</span>
<span class="token comment">//参数N···</span>
<span class="token keyword">const</span> myDom <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'这时一个H1'</span><span class="token punctuation">)</span>
<span class="token comment">// 参数1 虚拟DOM（react virtordom）  对象</span>
<span class="token comment">// 参数2 容器（container） 节点</span>
<span class="token comment">// 参数3 callback</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myDom<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 正常写法  app是react元素</span>
<span class="token keyword">const</span> app<span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>asdasfsd<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token comment">// or</span>
<span class="token keyword">const</span> <span class="token function-variable function">createApp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>asdasdasd<span class="token punctuation">{</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> app<span class="token operator">=</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>title<span class="token punctuation">:</span><span class="token string">&quot;1111&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_3-jsx"><a href="#_3-jsx" aria-hidden="true" class="header-anchor">#</a> 3 jsx</h2> <p>在 js 中混合写入 HTML的语法 叫做 jsx 语法 符合 xml 规范</p> <p>需要通过 babel 转换成 正常的 js React.creatElement()的形式</p> <p>安装 babel 包</p> <p>babel-core babel-loader babel-plugin-transform-runtime -D</p> <p>babel-preset-env babel-preset-stage-0</p> <p>babel-preset-react</p> <p>.babelrc 文件内部</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">&quot;env&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;stage-0&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;react&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">&quot;transform-runtime&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="在react中有两种括号"><a href="#在react中有两种括号" aria-hidden="true" class="header-anchor">#</a> 在react中有两种括号</h3> <ol><li>{} 变量引用</li> <li>（）返回值域</li></ol> <h3 id="react的-底层渲染原理"><a href="#react的-底层渲染原理" aria-hidden="true" class="header-anchor">#</a> React的 底层渲染原理</h3> <p>通过  React.createElement('p',{className:'app'}) 来创建DOM 进行比较，而把DOM 解析成JSON 对象。</p> <h2 id="_4-组件"><a href="#_4-组件" aria-hidden="true" class="header-anchor">#</a> 4 组件</h2> <ul><li><p>组件中 自定义组件需要大写字母开头，原生 DOM 需要小写字母开头</p></li> <li><p>纯函数，传递进来相同的值得到的额结果是相同的，并且不会修改输入的值。</p></li> <li><p>react 中无论是 class 还是 function 声明的组件都是必须是纯函数。</p></li> <li><p>每个父组件只能调用子组件</p></li></ul> <h3 id="_4-0-1-创建组件的第一种方式-函数式"><a href="#_4-0-1-创建组件的第一种方式-函数式" aria-hidden="true" class="header-anchor">#</a> 4.0.1 创建组件的第一种方式 函数式</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//props 式父组件传递过来的  是只读的属性 read-only</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">//表示什么都不渲染 空组件</span>
    <span class="token comment">//在组件中必须返回一个合法的虚拟DOM</span>
    <span class="token keyword">return</span> （<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>hello  world！<span class="token punctuation">}</span>
    <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>）
<span class="token punctuation">}</span>
<span class="token keyword">const</span> ddog<span class="token operator">=</span><span class="token punctuation">{</span>
    name：“xiaobai”，
    age：<span class="token number">4</span>
<span class="token punctuation">}</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Hello <span class="token punctuation">{</span><span class="token operator">...</span>dog<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ddog<span class="token operator">=</span>【
‘大黄’，
‘小白’
】
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Hello name<span class="token operator">=</span><span class="token punctuation">{</span>ddog【<span class="token number">1</span>】<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_4-0-2-使用-class-关键字"><a href="#_4-0-2-使用-class-关键字" aria-hidden="true" class="header-anchor">#</a> 4.0.2 使用 class 关键字</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">class</span> <span class="token class-name">World</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>这是<span class="token keyword">class</span> 创建的组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> World
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>接受外界 props 参数</p> <p>在 class 创建的组件不需要接受形参 props 通过 this.props.参数 即可获取到</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在 class 创建的组件 props 也是只读的 不可写</p> <p>react 官方说 无状态组件由于没有自己的 state 和生命周期函数 所以无状态组件的渲染效率会更高一些</p> <h3 id="_4-0-3-class-创建组件的状态"><a href="#_4-0-3-class-创建组件的状态" aria-hidden="true" class="header-anchor">#</a> 4.0.3 class 创建组件的状态</h3> <p>使用 class 创建的组件有自己的私有数据 有状态组件</p> <p>但是通过 function 创建的没有私有数据和生命周期函数 无状态组件</p> <p>class 组件的状态</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">class</span> <span class="token class-name">World</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//这就相当于vue  中的 data  数据对象</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> World
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>this.state 是组件自己的状态 是可读可写的</p> <h3 id="_4-0-4-父子组件的基本构造"><a href="#_4-0-4-父子组件的基本构造" aria-hidden="true" class="header-anchor">#</a> 4.0.4 父子组件的基本构造</h3> <p>数据 最好放在父组件中传递到子组件 控制，在数据改变后 基于数据的组件进行销毁重绘</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//父组件</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> Common <span class="token keyword">from</span> <span class="token string">'./common'</span>
<span class="token keyword">import</span> <span class="token string">'../css/Box.css'</span>

<span class="token keyword">class</span> <span class="token class-name">Box</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      commons<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> username<span class="token punctuation">:</span> <span class="token string">'王五'</span><span class="token punctuation">,</span> userContext<span class="token punctuation">:</span> <span class="token string">'hahahahaha'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> username<span class="token punctuation">:</span> <span class="token string">'李四'</span><span class="token punctuation">,</span> userContext<span class="token punctuation">:</span> <span class="token string">'hahahahaha'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> username<span class="token punctuation">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span> userContext<span class="token punctuation">:</span> <span class="token string">'hahahahaha'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> username<span class="token punctuation">:</span> <span class="token string">'人流'</span><span class="token punctuation">,</span> userContext<span class="token punctuation">:</span> <span class="token string">'hahahahaha'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> username<span class="token punctuation">:</span> <span class="token string">'川流不息'</span><span class="token punctuation">,</span> userContext<span class="token punctuation">:</span> <span class="token string">'hahahahaha'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> username<span class="token punctuation">:</span> <span class="token string">'金城武'</span><span class="token punctuation">,</span> userContext<span class="token punctuation">:</span> <span class="token string">'hahahahaha'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> username<span class="token punctuation">:</span> <span class="token string">'王昭君'</span><span class="token punctuation">,</span> userContext<span class="token punctuation">:</span> <span class="token string">'hahahahaha'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> username<span class="token punctuation">:</span> <span class="token string">'李元芳'</span><span class="token punctuation">,</span> userContext<span class="token punctuation">:</span> <span class="token string">'hahahahaha'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;Box&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>commons<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token comment">// 数组最好不要更改元数据 而是使用map 等不会改变原数据的方法 生成新数组进程数据渲染</span>
          <span class="token operator">&lt;</span>Common <span class="token punctuation">{</span><span class="token operator">...</span>item<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token comment">//使用对象解构的方式进行传递值</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Box
<span class="token comment">//子组件</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token string">'../css/common.css'</span>
<span class="token keyword">class</span> <span class="token class-name">Common</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;common&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>评论人：<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>评论内容：<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>userContext<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Common
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h3 id="_4-0-5-默认导入的-css-样式表是全局生效"><a href="#_4-0-5-默认导入的-css-样式表是全局生效" aria-hidden="true" class="header-anchor">#</a> 4.0.5 默认导入的 Css 样式表是全局生效</h3> <ol><li><p>修改导入的 CSS 使其在当前生效类似于 Vue 中的 scopted 指令，react 中没有指令的概念，因此在 webpack 配置中给 css-loader 加规则？modules 为样式表启用模块化规则。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>text<span class="token punctuation">:</span><span class="token string">'/\.css$/'</span><span class="token punctuation">,</span>
    user<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span>'css<span class="token operator">-</span>loader<span class="token operator">?</span>mudules‘<span class="token punctuation">]</span>
<span class="token comment">//然后再具体使用过程中宏</span>
<span class="token keyword">import</span> componentsCss <span class="token keyword">from</span> ‘<span class="token punctuation">.</span><span class="token operator">/</span>componentsCss<span class="token punctuation">.</span>css’
<span class="token keyword">const</span> title<span class="token operator">=</span><span class="token punctuation">{</span>componentsCss<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token comment">//这样使用类名绑定</span>
<span class="token keyword">const</span> aside<span class="token operator">=</span><span class="token punctuation">{</span>componentsCss<span class="token punctuation">.</span>aside<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&gt;</span>
    标题
    <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>css 模块画只针对类和 ID 选择器 标签选择器不会匹配</p></li> <li><p>对类名进行自定义 在 modules 后面添加 <code>localIdentName=[path][name][local][hash;length]</code></p> <ol><li>[path]代表地址</li> <li>name 代表引入文件的名称</li> <li>local 代表 类名</li> <li>hash 代表 hash 区别 length 代表长度</li></ol></li> <li><p>不想让某一个类名被模块化 使用 ：global（类名） 进行包裹，这样该类名就不会被转化。：local（）包裹会被模块化（很少用默认就会被模块化）</p></li> <li><p>多类名的书写</p> <div class="language-javascript React line-numbers-mode"><pre class="language-javascript"><code>		 <span class="token punctuation">{</span><span class="token comment">/* 1. 使用多个类名控制样式的时候 类名用jion来添加 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">'text-green'</span><span class="token punctuation">,</span> <span class="token string">'text-size-20'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token constant">P</span>标签内部 font<span class="token operator">-</span>size <span class="token number">20</span>px<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 2. 使用classNames 包来动态添加多个不同的类型类名控制样式 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">classNames</span><span class="token punctuation">(</span><span class="token string">'text-red'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">'text-size-25'</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">'text-size-20'</span><span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token constant">P</span>标签内部 classnames 控制的类名
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 3. 使用styled-components 把样式看成是一种组件 在需要的样式处用样式组件把内容包裹起来 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>TitleStyled<span class="token operator">&gt;</span><span class="token constant">P</span>标签内部使用styled<span class="token operator">-</span>components 来控制的样式<span class="token operator">&lt;</span><span class="token operator">/</span>TitleStyled<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>第三方样式表 导入后 可以直接导入使用 或者取消其模块化</p></li> <li><p>行内样式写法</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">Comp1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token comment">// 内部分color style  式两个花括号</span>
    <span class="token operator">&lt;</span>h1 style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span>red<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> h1标签 <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ol> <h3 id="_4-0-6-条件渲染"><a href="#_4-0-6-条件渲染" aria-hidden="true" class="header-anchor">#</a> 4.0.6 条件渲染</h3> <p>组件的渲染可以根据 JS 的 IF else 进行判断然后选择进行渲染。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Hello1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>hello <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Hello2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>hello <span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">HelloWorld</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Hello1 <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Hello2 <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li><p>可以通过状态值来存储组件的状态，然后通过状态来有条件的渲染组件。</p></li> <li><p>在条件渲染中 可以使用 &amp;&amp; 短路与 或者 || 或者三元运算夫 都可以生效</p></li> <li><p>但是在条件特别复杂的情况下，官方建议单独提取组件</p></li></ul> <blockquote><p>注意：在警告类组件中 可以使用 return null 这样组件默认不渲染，在有警告符号的时候返回渲染组件。</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Logout</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> props<span class="token punctuation">.</span>isLogin <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>退出<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token comment">//如果登录状态是true  则显示退出按钮 否则不显示</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4-0-7-组件中的-list-和-key"><a href="#_4-0-7-组件中的-list-和-key" aria-hidden="true" class="header-anchor">#</a> 4.0.7 组件中的 list 和 key</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Body</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> Array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> list <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>item<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span><span class="token punctuation">{</span>list<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token comment">//这样就可以进行渲染了</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>但是在 react 中每一这<code>数组</code>中的==子元素== 需要提供一个==唯一的 KEY== 这个唯一的 KEY 最好使用==数据库中的 ID==</p> <blockquote><p>这样的主要原因 : 因为 react 在重新渲染的时候需要进行 diff 算法找出哪个元素进行变动了，在数组中无法找出具体哪个元素有变动了，所以需要吧 List 内的元素进行 Key 编号进行区分。</p></blockquote> <p>对于重复渲染的组件使用 key 可以比较元素是否需要进行渲染。</p> <blockquote><p>官方不推荐使用用 index 来当最 KEY 因为数组的 index 可能会改变</p></blockquote> <blockquote><p>key 只在数组上下文中有意义</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Users</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>
           props<span class="token punctuation">.</span>Users<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>User key<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>id<span class="token punctuation">}</span> user<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//key 只有在这里使用才有意</span>
        <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>props<span class="token punctuation">.</span>user<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>key 只在相邻的兄弟元素有意义，在不同的区域可以使用相同的 key，key 只有标识意义而没有参数意义。</p> <h2 id="_5、react-的事件"><a href="#_5、react-的事件" aria-hidden="true" class="header-anchor">#</a> 5、react 的事件</h2> <h3 id="_5-0-1-在-react-中事件绑定规则"><a href="#_5-0-1-在-react-中事件绑定规则" aria-hidden="true" class="header-anchor">#</a> 5.0.1 在 react 中事件绑定规则</h3> <p>在 react 中有一套自己的绑定事件，这写绑定事件遵循小驼峰命名。具体遵循{}规则，</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>hahaha<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token keyword">function</span> <span class="token function">hahaha</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-0-2-事件绑定传参"><a href="#_5-0-2-事件绑定传参" aria-hidden="true" class="header-anchor">#</a> 5.0.2 事件绑定传参</h3> <p>上面的方法有一点问题使不能传递参数 这个时候需要这样写</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hahaha</span><span class="token punctuation">(</span>参数<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span> #这样的处理使得<span class="token keyword">this</span>的指向不会处问题
 <span class="token function-variable function">hahaha</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">参数</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token function">alert</span><span class="token punctuation">(</span>参数<span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-0-3-阻止默认事件"><a href="#_5-0-3-阻止默认事件" aria-hidden="true" class="header-anchor">#</a> 5.0.3 阻止默认事件</h3> <p><strong>需要使用 e.preventDefault()来阻止 而不能使用 return false</strong></p> <h2 id="_6、react-的状态管理"><a href="#_6、react-的状态管理" aria-hidden="true" class="header-anchor">#</a> 6、react 的状态管理</h2> <p><strong>如果在 react 中这个属性不影响界面的渲染那么这个属性不要放在 state 中 直接挂载在 this 上</strong></p> <h3 id="_6-0-1-修改-state-状态"><a href="#_6-0-1-修改-state-状态" aria-hidden="true" class="header-anchor">#</a> 6.0.1 修改 state 状态</h3> <ol><li>推荐使用**this.setState({key:值})**来修改数据，遵守单项数据流规定。只有通过 setState 才能触发组件的重新渲染，每次只会更新变化的地方。如果直接修改 state 不会触发组件更新。</li> <li>在 setState 中只会把<strong>对应的 state 状态更新而不会覆盖其他的 state 状态</strong>。</li> <li><strong>setState 这个方法的执行使异步的</strong>，这个要注意，如果在 setstate 调用完成之后又想立即拿到 state 的值 ，需要使用方法 this.setState({},function(){内部拿})，或者通过 async 和 await</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">addCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">//上面count增加了两次但是每次都只加1</span>
      <span class="token comment">//这是因为setState是异步的，每次获取的state都是上一次的值。</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//使用这种方法进行</span>
    <span class="token function-variable function">addCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>proState<span class="token comment">//前面一个状态, props//这次的传递进来的参数) =&gt; {</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> proState<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token comment">//写法1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">proState<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> （<span class="token punctuation">{</span>count：proState<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span>）<span class="token punctuation">)</span><span class="token comment">//写法2</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>addCount<span class="token punctuation">}</span><span class="token operator">&gt;</span> 增加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="_6-0-2-state-的批量更新"><a href="#_6-0-2-state-的批量更新" aria-hidden="true" class="header-anchor">#</a> 6.0.2 state 的批量更新</h3> <p>上面由于 setState 方法是异步的 所以 其实每次的 setState（方法）这个方法 其实相当于多个 setState 嵌套在内部，只不过是 react 底层把这些方法 放到了异步事件队列里面。把他变成了一个同步类似的操作，但是本质还是异步事件。</p> <p>当 setState 的多次调用，更改多个独立的变量的时候。setstate 会把多次操作合并一起来操作，提高效率。</p> <p>相当于使用 Object.assign({},this.state,newState)类似于这个</p> <h3 id="_6-0-3-文本框的-state-改变"><a href="#_6-0-3-文本框的-state-改变" aria-hidden="true" class="header-anchor">#</a> 6.0.3 文本框的 state 改变</h3> <p>当为文本框绑定 value 值之后</p> <ul><li><p>要么同时提供一个 readonly 属性 表示这个元素只读 不能被修改</p></li> <li><p>要不然提供一个 onChange 事件 表示可以被修改 要自己定义修改的逻辑</p></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeValue</span><span class="token punctuation">(</span><span class="token string">'haha'</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token comment">//这样在数据重新添加后表单框可以继续操作</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_6-0-4-如何返回状态值"><a href="#_6-0-4-如何返回状态值" aria-hidden="true" class="header-anchor">#</a> 6.0.4 如何返回状态值</h3> <p>每当 state 状态改变 页面上 state 绑定的元素就会自动改变，这样就是单项数据流，而 react 无法把界面的值在同步会 state 中，需要手动监听文本框的 Onchange 事件 拿到在 onChange 事件中文本框的值，调用 this.setState（） 来绑定回去。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//在onChange  事件中获取文本狂顶额值由里昂中法安安</span>
<span class="token number">1.</span> 通过事件参数<span class="token constant">E</span>来获取
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeValue</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
changeValue（e）<span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token comment">//代表触发事件的源</span>
<span class="token punctuation">}</span>
<span class="token number">2</span> 通过ref  属性
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> ref<span class="token operator">=</span>“txt”<span class="token operator">/</span><span class="token operator">&gt;</span>
changeValue（）<span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>ref<span class="token punctuation">.</span>tet<span class="token punctuation">.</span>value<span class="token comment">// 通过  this.ref可以获取到原DOM 节点</span>
<span class="token punctuation">}</span>
<span class="token number">3</span> 通过  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token comment">//等方式来拿</span>
然后通过  setState（<span class="token punctuation">{</span><span class="token punctuation">}</span>）来设置
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_6-0-5-form-表单"><a href="#_6-0-5-form-表单" aria-hidden="true" class="header-anchor">#</a> 6.0.5 Form 表单</h3> <p>受控组件 input textarea select 等等保持自己的状态，根据用户输入更新,用户在输入框中输入的值传递给 react 的 state，而通过 stae 控制表单的呈现。把 state 的值作为表单对象值的唯一来源。这样就是受控组件。</p> <h4 id="input"><a href="#input" aria-hidden="true" class="header-anchor">#</a> input</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      userName<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      password<span class="token punctuation">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">handelChange</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token punctuation">[</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'e.target.value :'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;userName&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>userName<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handelChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token comment">//或者是传递过来一个 onChange={e =&gt; this.handleChange('username', e)}</span>
          <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>password<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handelChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>input Onsubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h4 id="select"><a href="#select" aria-hidden="true" class="header-anchor">#</a> select</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
 <span class="token function-variable function">handelChange</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token punctuation">[</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'e.target.value :'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span>select name<span class="token operator">=</span><span class="token string">&quot;fruit&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>fruit<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handelChange<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;grapeFruit&quot;</span><span class="token operator">&gt;</span>葡萄<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;lime&quot;</span><span class="token operator">&gt;</span>lime<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;coconut&quot;</span><span class="token operator">&gt;</span>coconut<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;mango&quot;</span><span class="token operator">&gt;</span>mango<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
<span class="token comment">//多选</span>
<span class="token operator">&lt;</span>select name<span class="token operator">=</span><span class="token string">&quot;fruit&quot;</span>
	multiple<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>  <span class="token comment">//可以多选</span>
	value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">'grapeFruit'</span><span class="token punctuation">,</span><span class="token string">'lime'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>  <span class="token comment">//默认值</span>
	onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handelChange<span class="token punctuation">}</span>  <span class="token comment">//选择更改触发的方法</span>
<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;grapeFruit&quot;</span><span class="token operator">&gt;</span>葡萄<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;lime&quot;</span><span class="token operator">&gt;</span>lime<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;coconut&quot;</span><span class="token operator">&gt;</span>coconut<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;mango&quot;</span><span class="token operator">&gt;</span>mango<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="_6-0-6-非受控组件"><a href="#_6-0-6-非受控组件" aria-hidden="true" class="header-anchor">#</a> 6.0.6 非受控组件</h3> <p>value 的值于 state 内部的值不保持关联或者统一这种是非受控组件</p> <p>表单输入框的其他 handlechange 方式 这就是非受控组件的写法</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
   在通过ref 获取值的时候只需要使用
   <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>username 就可以了
   而不需要在使用<span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>
 <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
    <span class="token function-variable function">handleSubmit</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span>
        <span class="token comment">//1 通过 this.refs.username.value 来获取这个值  但是这种方式已经被抛弃</span>
        <span class="token comment">//2 通过  this.username 就可以拿到了</span>
    <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">&quot;&quot;</span> onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span>“username” <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token comment">//1</span>
          <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token comment">//ref可以接受值 也可以接受一个函数，如果接受的是一个函数，那么这个函数会在虚拟DOM 转换成真实DOM 并插入到这个页面的瞬间立刻调用。参数就是真实DOM</span>
          <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">input</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>userName <span class="token operator">=</span> input<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token comment">//2</span>
          <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">input</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> input<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>input type<span class="token operator">=</span>“submit” <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><blockquote><p>受控组件和非受控组件各自的好处和应用场景，如果只是表单 推荐使用受控组件，这样用户的输入收到控制，可以控制值的属性和合法性，</p> <p>非受控组件和第三方库进行集成,这样就只能使用非受控组件</p> <p>在渲染的时候如果 value 改成一个 null 那么这个组件会变成一个非受控组件也就是说可以随便改了，</p></blockquote> <h3 id="_6-0-7-dangerroussetinnerhtml-富文本编辑器"><a href="#_6-0-7-dangerroussetinnerhtml-富文本编辑器" aria-hidden="true" class="header-anchor">#</a> 6.0.7 dangerrousSetInnerHTML 富文本编辑器</h3> <p>危险富文本的输入方式</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>state<span class="token operator">=</span><span class="token punctuation">{</span>
    article<span class="token punctuation">:</span><span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>hahahaha<span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>asldjalsjdlaj<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>div dangerousSetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>__html<span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>article<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token comment">//两个下划线html</span>
<span class="token comment">//这样来输入 富文本编辑器中的带标签的渲染</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_6-0-8-扩展传递参数语法"><a href="#_6-0-8-扩展传递参数语法" aria-hidden="true" class="header-anchor">#</a> 6.0.8 {... }扩展传递参数语法</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">student</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
             <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>name<span class="token punctuation">:</span><span class="token punctuation">{</span>student<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>others<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token operator">...</span>student<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_7、组件的生命周期"><a href="#_7、组件的生命周期" aria-hidden="true" class="header-anchor">#</a> 7、组件的生命周期</h2> <p><a href="http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank" rel="noopener noreferrer">生命周期图谱<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_7-0-1-props-值初始化"><a href="#_7-0-1-props-值初始化" aria-hidden="true" class="header-anchor">#</a> 7.0.1 props 值初始化</h3> <p>最开始初始化会调用==static.defaultProps ={}== 接受外面传递进来的参数 ，在这里初始化属性默认值。防止有些 props 属性没传递报错问题</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
    <span class="token keyword">static</span> defaultProps<span class="token operator">=</span><span class="token punctuation">{</span>
        name<span class="token punctuation">:</span><span class="token string">&quot;点击&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>在16.8版本中defaultProps 使用方法已经更改</p></blockquote> <p>在16.8 版本之后defaultProps 使用方法</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
    <span class="token comment">//TOdo</span>
<span class="token punctuation">}</span>
<span class="token constant">A</span><span class="token punctuation">.</span>defaultProps<span class="token operator">=</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">'点击'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_7-0-2-组件的创建阶段"><a href="#_7-0-2-组件的创建阶段" aria-hidden="true" class="header-anchor">#</a> 7.0.2 组件的创建阶段</h3> <p>只在开始的时候运行一次</p> <ol><li>constructor 构造函数运行，初始化组件和state</li> <li><s>生命周期函数 componentWillMount 组件将要挂载，还没有挂载 此时虚拟 DOM 还没有创建</s> componentWillMount 已经被声明在未来的版本中不支持使用，而使用 getDerivedStateFromProps ，用于将Props 中的实行导出到state 中如果需要的话，虽然react 不推荐这么做。</li> <li>render，创建虚拟 DOM 但是还没有挂载到页面上。</li> <li>生命周期函数 componentDidMount 已经挂载完成 内存中的虚拟 DOM 和页面 都已经统一了，在这里会发送ajax</li></ol> <h3 id="_7-0-3-组件的运行阶段"><a href="#_7-0-3-组件的运行阶段" aria-hidden="true" class="header-anchor">#</a> 7.0.3 组件的运行阶段</h3> <ol><li><p>state 状态在运行中改变 了 情况下的钩子流程</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 组件是否需要被更新  会返回<span class="token boolean">true</span> 或者<span class="token boolean">false</span> 此时组件并未更新  但是state 和props  都是最新的
返会<span class="token boolean">false</span> 界面就不会改变，这个时候  数据已经改变了  数据是最新的 ，界面还是旧的
发回<span class="token boolean">true</span> 进入 <span class="token comment">//componentWillUpdate()//这个时候界面也还没有更新，但是数据时新的  但是已经知道下一步要进行更新了，在16.8 以后官方声明不在支持该函数 已被取消</span>
接下来 <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">然后触发componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//页面重新渲染完毕</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><s>属性 props 改变 首先生命周期函数 <code>componentWillReceiveProps</code> 只要这个被触发旧说明父组件为子组件传递了新的属性值，然后 触发 state 改变的全套流程。</s> 该函数在16.8 以后已被 声明不支持使用</p></li> <li><p>在16.8 以后有一个新函数 getSnapshotBeforeUpdate（） 这个生命周期函数在虚拟DOM 渲染之后  DOM 挂载之前，会返回一个快照，并发送给 componentDidUpdate（）的第三个参数，这样可以在两个周期中对DOM 进行比较处理 ，getSnapshotBeforeUpdate的触发事件是在更新界面DOM的前一瞬间</p></li></ol> <h3 id="_7-0-4-组件的销毁阶段"><a href="#_7-0-4-组件的销毁阶段" aria-hidden="true" class="header-anchor">#</a> 7.0.4 组件的销毁阶段</h3> <p>会执行 卸载（Unmount）然后触发 结束前的生命周期事件 componentWillUnmount 还没有卸载（数据和函数还是可以使用的）</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDom <span class="token keyword">from</span> <span class="token string">'react-dom'</span>
<span class="token keyword">class</span> <span class="token class-name">World</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span> 计数器<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">countAdd</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>当前数量是<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">countdelete</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>destroy<span class="token punctuation">}</span><span class="token operator">&gt;</span>销毁组件<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//组件将要被卸载</span>
     window<span class="token punctuation">.</span><span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token comment">//第二种(2)</span>
  <span class="token punctuation">}</span>
<span class="token function">componentDidUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//在16.4  以后已经被 舍弃</span>
    <span class="token comment">//组件已经被卸载完成</span>
<span class="token punctuation">}</span>
componentWillMount（）<span class="token punctuation">{</span>
    <span class="token comment">//把timer挂载到this上</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>countAdd<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
  <span class="token function-variable function">countAdd</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function-variable function">countdelete</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function-variable function">destroy</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token comment">//销毁组件的方法 如果不销毁timer 会发生setInterval  还存在this却被删除的情况，所以在销毁组件之前，需要把定时器清除掉，可以在这个方法内清除  也可以在组件卸载的钩子函数中执行</span>
      window<span class="token punctuation">.</span><span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token comment">//第一种(1)</span>
      ReactDom<span class="token punctuation">.</span><span class="token function">componentWillUnmountAtNode</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> World
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>在组件的销毁阶段主要是回受定时器或者其他页面的费时资源，减小内存消耗，防止内存泄漏。</p> <h3 id="_7-0-5-props-传递的校验和初始值设定"><a href="#_7-0-5-props-传递的校验和初始值设定" aria-hidden="true" class="header-anchor">#</a> 7.0.5 props 传递的校验和初始值设定</h3> <h4 id="_16-4-版本之前"><a href="#_16-4-版本之前" aria-hidden="true" class="header-anchor">#</a> 16.4 版本之前</h4> <p>react 的类型种有专门的类型校验的包，内部有专门用于类型校验的给中属性，对于类型比较负载的使用 function 来进行类型校验，</p> <p>通过 throw new Errror 来进行类型提醒</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>
<span class="token comment">// 类型校验的包</span>
<span class="token comment">//关于类型校验  react 由一个专门的第三方包  叫做proptypes 在v-15版本以前没有单独抽离  v-15 以后需要单独安装</span>

<span class="token keyword">class</span> <span class="token class-name">World</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token comment">//在组件封装的额时候  由一些参数是必须的 哪怕用户没有传递一些启动参数  这个时候组件内部 计量给自己传递默认值</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//如果外界么有传递props设置默认值</span>
    number<span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//创建一个静态的props对象  在这个对象中可以把外界传递过来的属性做类型校验</span>

    number<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequird<span class="token punctuation">,</span>
      gender<span class="token punctuation">:</span>PropTypes<span class="token punctuation">.</span><span class="token function">oneOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'男'</span>，<span class="token string">'女'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>，<span class="token comment">//枚举</span>
      name<span class="token punctuation">:</span>PropTypes<span class="token punctuation">.</span>String<span class="token punctuation">.</span>isRequird<span class="token punctuation">,</span><span class="token comment">//string</span>
      hobby<span class="token punctuation">:</span>PropTypes<span class="token punctuation">.</span>array<span class="token punctuation">.</span>isRequird<span class="token comment">//数组</span>
      position<span class="token punctuation">:</span>PropTypes<span class="token punctuation">.</span><span class="token function">shape</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token comment">//验证对象类型  内部校验 对对象内部的属性要求</span>
      x<span class="token punctuation">:</span>PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequird<span class="token punctuation">,</span>
      y<span class="token punctuation">:</span>PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequird
  <span class="token punctuation">}</span><span class="token punctuation">)</span>，
  <span class="token comment">//对于属性校验比较复杂的</span>
  age：<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span>propName<span class="token punctuation">,</span>componentName</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//接受三个参数  1   参数对象 2 参数名称,3 组件名称</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>props<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">||</span>props<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'年龄超标'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span> 计数器<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">countAdd</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>当前数量是<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">countdelete</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">countAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">countdelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> World

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h4 id="_16-4-版本之后"><a href="#_16-4-版本之后" aria-hidden="true" class="header-anchor">#</a> 16.4 版本之后</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>
<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
<span class="token constant">A</span><span class="token punctuation">.</span>propTypes<span class="token operator">=</span><span class="token punctuation">{</span>
    num<span class="token punctuation">:</span>PropTypes<span class="token punctuation">.</span>number
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_7-0-6-16-4版本之后已移除componentwillmount-钩子函数"><a href="#_7-0-6-16-4版本之后已移除componentwillmount-钩子函数" aria-hidden="true" class="header-anchor">#</a> 7.0.6  16.4版本之后已移除<s>componentWillmount 钩子函数</s></h3> <p>这个钩子运行在 render 之前，在组件即将挂载在页面上之前执行，在这个组件里面没有虚拟 DOM 有最新的数据。 这个函数等同于 vue 中的 created 函数</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//在这个钩子函数 不能操作DOm 元素 但是在这里可以获取到 state 和props  数据</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this.state.number'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>number<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">countAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token comment">//组件内部的实例方法  自组件周期开始旧可以进行调用</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_7-0-7-render-函数"><a href="#_7-0-7-render-函数" aria-hidden="true" class="header-anchor">#</a> 7.0.7 render 函数</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
document<span class="token punctuation">.</span><span class="token function">querySelecter</span><span class="token punctuation">(</span>'<span class="token punctuation">.</span>aaa<span class="token punctuation">)</span> <span class="token comment">//null  在这里虚拟DOM 还没有创建好所以是空的</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span> 计数器<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">countAdd</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>当前数量是<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">countdelete</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
    在这里虚拟<span class="token constant">DOM</span> 已经创建好了  但是还没有挂载在root 上所以还是获取不到
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_7-0-8-componentdidmount（）钩子函数"><a href="#_7-0-8-componentdidmount（）钩子函数" aria-hidden="true" class="header-anchor">#</a> 7.0.8 componentDidMount（）钩子函数</h3> <p>当组件挂载完毕之后会进入这个生命周期函数，只要进入这个生命周期函数，就说明页面上已经可以看到页面组件了。在这个钩子中可以操作 DOM 元素，想要操作 DOM 元素，最早在这个钩子函数。相当于 Vue 的 mounted 函数,在这里可以给原生 DOM 绑定事件</p> <blockquote><p>因为这个生命周期函数只会被执行一次，所有吧 ajax 请求放在这个周期内最合适，</p> <p>因为 componentWillMount 在 react-native 和服务器同构的时候会右为问题所以不使用 componentWillMount</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'document.querySelector()'</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_7-0-9shouldcomponentupdate（nextprops，nextstate）-钩子函数"><a href="#_7-0-9shouldcomponentupdate（nextprops，nextstate）-钩子函数" aria-hidden="true" class="header-anchor">#</a> 7.0.9shouldComponentUpdate（nextProps，nextState） 钩子函数</h3> <p>来判断组件是否需要更新，这个函数一定要有 return 一个 boolean 值 true 或者 false</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token comment">//如果返回False state状态会被修改 也就是实例方法会触发  但是页面不会重新渲染。</span>
  <span class="token punctuation">}</span>
  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps，nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// return this.state.count % 2？true：false //注意不能这么写 这里面拿到的是上一次的值</span>
      <span class="token keyword">return</span> nextState<span class="token punctuation">.</span>count

  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_7-1-0-16-4版本以后以移除componentwillupdate（nextprops，nextstate）钩子函数"><a href="#_7-1-0-16-4版本以后以移除componentwillupdate（nextprops，nextstate）钩子函数" aria-hidden="true" class="header-anchor">#</a> 7.1.0 16.4版本以后以移除<s>componentWillUpdate（nextProps，nextState）钩子函数</s></h3> <p>在进入这个生命周期函数的时候，组将还没有更新 将要更新。</p> <p>注意：在这个组件内部获取到的 DOM 都是界面上原来的旧的，应该慎重操作，因为你可能操作的是旧的 DOM</p> <p>在这这钩子函数之后的 render 也就是在运行阶段中每当调用 render 函数的时候，内部的 DOM 还是旧的。</p> <h3 id="_7-1-1-componentdidupdate（prexprops，prevstate）-钩子函数"><a href="#_7-1-1-componentdidupdate（prexprops，prevstate）-钩子函数" aria-hidden="true" class="header-anchor">#</a> 7.1.1 componentDidUpdate（prexProps，prevState） 钩子函数</h3> <p>在这个内部可以放心操作 DOM 了 以为你数据和 DOM 已经一致了。</p> <h3 id="_7-1-2-16-4版本以后以移除componentwillreceiveprops-nextprops"><a href="#_7-1-2-16-4版本以后以移除componentwillreceiveprops-nextprops" aria-hidden="true" class="header-anchor">#</a> 7.1.2 16.4版本以后以移除<s>componentWillReceiveProps(nextProps)</s></h3> <p>当子组件第一次被渲染在页面上行的时候不会触发这个函数，</p> <p>只有父组件中通过事件修改了传递到子组件内部的值的时候才会触发这个函数。</p> <p>注意：这个函数内部的 this。props 获取的属性值是上一次的旧的属性值。如果要获取新的属性值需要通过属性列表中的 <strong>nextProps</strong></p> <h3 id="_7-1-3-钩子函数中的参数列表"><a href="#_7-1-3-钩子函数中的参数列表" aria-hidden="true" class="header-anchor">#</a> 7.1.3 钩子函数中的参数列表</h3> <ol><li>在组件创建阶段和组件的销毁阶段 是没有参数列表属性的</li> <li>在组件的运行阶段==带 will 的== 的内部的 this.state 和 this.props 指向的都是旧的数据,参数列表中的 nextProps 和 nextState 是获取新数据</li> <li>而==DId== 钩子参数列表都是获取前一个阶段的 proState 和 proProps 在组件内部获取==当前==的 this.state 和 this.props</li></ol> <h3 id="_7-1-4-16-4-新增的生命周期函数"><a href="#_7-1-4-16-4-新增的生命周期函数" aria-hidden="true" class="header-anchor">#</a> 7.1.4 16.4 新增的生命周期函数</h3> <h4 id="getsnapshotbeforeupdate（）"><a href="#getsnapshotbeforeupdate（）" aria-hidden="true" class="header-anchor">#</a> getSnapshotBeforeUpdate（）</h4> <ol><li>这个生命周期函数在虚拟DOM 渲染之后  DOM 挂载之前，会返回一个快照，并发送给 componentDidUpdate（）的第三个参数，</li> <li>两个周期中对DOM 进行比较处理 ，</li> <li>getSnapshotBeforeUpdate的触发事件是在更新界面DOM的前一瞬间</li> <li>主要应用场景是需要比较生成的虚拟DOM 和 渲染Dom的比较处理</li></ol> <h4 id="getderivedstatefromprops-（）"><a href="#getderivedstatefromprops-（）" aria-hidden="true" class="header-anchor">#</a> getDerivedStateFromProps （）</h4> <ol><li><p>当state需要从props初始化时，使用</p></li> <li><p>量不使用，维护俩者状态需要消耗额外资源，增加复杂度</p></li> <li><p>每次组件更新都会触发</p></li> <li><p>典型场景表单获取默认值</p></li> <li><p>props传到到state是有风险的，必须要确定组件的数据是单一数据源，<a href="https://zh-hans.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#what-about-memoization" target="_blank" rel="noopener noreferrer">见官方的说明 你可能不需要使用派生 state<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ol> <h2 id="_8、react-中的函数的-this-指向改变"><a href="#_8、react-中的函数的-this-指向改变" aria-hidden="true" class="header-anchor">#</a> 8、react 中的函数的 this 指向改变</h2> <p><strong>在 react 中要特别注意 this 的指向问题，需要注意在改变 this 指向的函数，例如定时器中需要对 THIS 指向进行重新绑定</strong></p> <h3 id="_8-0-1-使用箭头函数改变-this-指向"><a href="#_8-0-1-使用箭头函数改变-this-指向" aria-hidden="true" class="header-anchor">#</a> 8.0.1 使用箭头函数改变 this 指向</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token operator">&lt;</span>button style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> display<span class="token punctuation">:</span> <span class="token string">'block'</span><span class="token punctuation">,</span> margin<span class="token punctuation">:</span> <span class="token number">30</span> <span class="token operator">+</span> <span class="token string">'px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click1<span class="token punctuation">}</span><span class="token operator">&gt;</span>
   <span class="token comment">//或者</span>
       <span class="token operator">&lt;</span>button style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> display<span class="token punctuation">:</span> <span class="token string">'block'</span><span class="token punctuation">,</span> margin<span class="token punctuation">:</span> <span class="token number">30</span> <span class="token operator">+</span> <span class="token string">'px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">（）</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">click1</span><span class="token punctuation">(</span>参数<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
           <span class="token comment">//这种方法可能导致子组件的重新渲染，因为每次调用的箭头函数都是新创建的函数</span>
   <span class="token function-variable function">click1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">'hahaha'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_8-0-2-使用-bind-重置-this"><a href="#_8-0-2-使用-bind-重置-this" aria-hidden="true" class="header-anchor">#</a> 8.0.2 使用 bind 重置 this</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> display<span class="token punctuation">:</span> <span class="token string">'block'</span><span class="token punctuation">,</span> margin<span class="token punctuation">:</span> <span class="token number">30</span> <span class="token operator">+</span> <span class="token string">'px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">click1</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
     <span class="token function">click1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">'hahaha'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>当然也可以使用 call 和 apply 改变 但是会立即调用。</p> <p>传递参数的绑定方法</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> display<span class="token punctuation">:</span> <span class="token string">'block'</span><span class="token punctuation">,</span> margin<span class="token punctuation">:</span> <span class="token number">30</span> <span class="token operator">+</span> <span class="token string">'px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">click1</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
     <span class="token function">click1</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//传递参数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">'hahaha'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_8-0-3-在构造函数中绑定-this-并传参"><a href="#_8-0-3-在构造函数中绑定-this-并传参" aria-hidden="true" class="header-anchor">#</a> 8.0.3 在构造函数中绑定 this 并传参</h3> <p><strong>这种方式是官方推荐的，只需要绑定一次，节约效率</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>在构造器中
 <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">'aaa'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>click2 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">click2</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span>，参数<span class="token punctuation">)</span> <span class="token comment">//bing的返回值是改造函数的拷贝 原函数不变</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span>button style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> display<span class="token punctuation">:</span> <span class="token string">'block'</span><span class="token punctuation">,</span> margin<span class="token punctuation">:</span> <span class="token number">30</span> <span class="token operator">+</span> <span class="token string">'px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click2<span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token function">click2</span><span class="token punctuation">(</span><span class="token parameter">参数</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'参数'</span><span class="token punctuation">,</span> 参数<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this2'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_9、context-特性-上下文"><a href="#_9、context-特性-上下文" aria-hidden="true" class="header-anchor">#</a> 9、context 特性(上下文)</h2> <h3 id="_9-1-16-8版本-之前的-context-特性"><a href="#_9-1-16-8版本-之前的-context-特性" aria-hidden="true" class="header-anchor">#</a> 9.1 16.8版本 之前的 context 特性</h3> <p>多层组件的嵌套，在后代组件中可以使用 context 特性。</p> <p>在父组件身上共享一个 context 特性，在后代组件中不需要逐层传递了，可以直接获取这个属性。</p> <p>在父组件中创建一个实例方法 getChildContext()</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>
<span class="token function">getChildContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        color<span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>color
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//使用时互姓校验规定以下传递给子组件的数据类型</span>
<span class="token keyword">static</span> childContextTypes<span class="token operator">=</span><span class="token punctuation">{</span>
    color：PropTypes<span class="token punctuation">.</span>String
<span class="token punctuation">}</span>
#在子组件中
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>
<span class="token comment">//1 先进行属性校验</span>
<span class="token keyword">static</span> contextTypes <span class="token operator">=</span><span class="token punctuation">{</span><span class="token comment">//接受外部的数据一定要进行数据校验</span>
    color：ReactTypes<span class="token punctuation">.</span>string<span class="token comment">//只有在这里进行验证了才说明你要接受使用这个属性</span>
    <span class="token comment">//还可以对方法经行执行验证  也就是夫组件的state  如何在子组件中进行更改</span>
    setColor<span class="token punctuation">:</span>ReactTypes<span class="token punctuation">.</span>func
<span class="token punctuation">}</span>
<span class="token comment">//2 使用</span>
<span class="token operator">&lt;</span>h5<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>color<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">&gt;</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_9-2-传递方法给子组件-让子组件可以修改父组件的状态"><a href="#_9-2-传递方法给子组件-让子组件可以修改父组件的状态" aria-hidden="true" class="header-anchor">#</a> 9.2 传递方法给子组件 让子组件可以修改父组件的状态</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//子组件中</span>
<span class="token keyword">class</span> <span class="token class-name">Conser</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> contextTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    color<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
    setColor<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func
    <span class="token comment">//接受父组件的修改颜色的方法</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> backgroundColor<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>color <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token number">1111</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>变红<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token comment">//使用父组件的setCOlor方法</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//子组件中</span>
<span class="token keyword">class</span> <span class="token class-name">Han</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> contextTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    color<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
    setColor<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> backgroundColor<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>color <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token number">2222222</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token string">'black'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>变hei<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//在父组件中</span>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment">//定义要传递的属性的类型</span>
  <span class="token keyword">static</span> childContextTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    color<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
    setColor<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func
  <span class="token punctuation">}</span>
  <span class="token function-variable function">setColor</span> <span class="token operator">=</span> <span class="token parameter">color</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setColor'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      color<span class="token punctuation">:</span> color
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      show<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      color<span class="token punctuation">:</span> <span class="token string">'green'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//要传递的context</span>
  <span class="token function">getChildContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>color<span class="token punctuation">,</span> setColor<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>setColor <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show <span class="token operator">?</span> <span class="token operator">&lt;</span>Conser <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">:</span> <span class="token operator">&lt;</span>Han <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>

        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">&gt;</span>gabian<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> show<span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h3 id="_9-3-16-8-版本之后的context使用"><a href="#_9-3-16-8-版本之后的context使用" aria-hidden="true" class="header-anchor">#</a> 9.3 16.8 版本之后的context使用</h3> <p>在16.8 版本之后context 使用注重组件性  把 context  分为提供者和使用者，通过组件的方式把context属性提供给子组件</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> createContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>  <span class="token comment">//引入createContext</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> Provider<span class="token punctuation">,</span> Consumer<span class="token punctuation">:</span> CountConsumer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//解析处提供和使用者</span>

<span class="token keyword">class</span> <span class="token class-name">CountProvider</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span> <span class="token comment">//制造提供者组件  而共有属性作为这个组件的属性存在</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> 
      count<span class="token punctuation">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">del</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'del'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      count<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">-</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      count<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Provider <span class="token comment">//需要引用提供者</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token comment">//这些式需要被公共引用的属性</span>
          count<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">,</span>
          del<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>del<span class="token punctuation">,</span>
          add<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>add
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Count</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>CountConsumer<span class="token operator">&gt;</span><span class="token comment">//使用使用者组件  内部包含一个函数</span>
        <span class="token punctuation">{</span><span class="token parameter">arg</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//函数的参数式需要得到的公共参数</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Btn handleClick<span class="token operator">=</span><span class="token punctuation">{</span>arg<span class="token punctuation">.</span>del<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token string">&quot;-&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token comment">//公共参数</span>
              <span class="token punctuation">{</span>arg<span class="token punctuation">.</span>count<span class="token punctuation">}</span>
              <span class="token operator">&lt;</span>Btn handleClick<span class="token operator">=</span><span class="token punctuation">{</span>arg<span class="token punctuation">.</span>add<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token string">&quot;+&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>CountConsumer<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Btn</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>CountProvider<span class="token operator">&gt;</span><span class="token comment">//使用自己创造的提供者组件包裹需要公共属性的组件</span>
      <span class="token operator">&lt;</span>Count <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>CountProvider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><h2 id="_10、-动画"><a href="#_10、-动画" aria-hidden="true" class="header-anchor">#</a> 10、 动画</h2> <h3 id="_10-1-classname-配合-css-实现动画"><a href="#_10-1-classname-配合-css-实现动画" aria-hidden="true" class="header-anchor">#</a> 10.1 className 配合 css 实现动画</h3> <h3 id="_10-2-使用了动画过度库-react-transition-group"><a href="#_10-2-使用了动画过度库-react-transition-group" aria-hidden="true" class="header-anchor">#</a> 10.2 使用了动画过度库'react-transition-group'</h3> <h4 id="_10-2-1-内部结构"><a href="#_10-2-1-内部结构" aria-hidden="true" class="header-anchor">#</a> 10.2.1 内部结构</h4> <p>CSSTransition 会自动在执行动画期间切换三个类名 fade-enter fade-enter-active fade-enter-done</p> <p>fade-enter 在 show 变成 true 第一时间切入执行</p> <p>fade-enter-active 第二个瞬间 执行</p> <p>fade-enter-done 结束的时候执行</p> <p>同样出场动画与上面类似 fade-exit</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">aniDiv</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>CSSTransition
        <span class="token keyword">in</span><span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>show<span class="token punctuation">}</span><span class="token comment">//执行的触发条件</span>
        timeout<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1000</span><span class="token punctuation">}</span> <span class="token comment">//执行时间</span>
		classNames<span class="token operator">=</span>“fade” <span class="token comment">//这个fade和fade-enter 的前缀fade相同</span>
		unmountOnExit <span class="token comment">//当出场动画结束之后移除对应的DOM 节点</span>
        onEntered<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">（el）</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token comment">//钩子函数  完全进入之后  el是当前动画的动画节点</span>
                   el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span>  <span class="token comment">//对执行动画的节点经行操作</span>
                  <span class="token punctuation">}</span><span class="token punctuation">}</span>
        appear<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token comment">//元素第一次出现在DOM 上就会执行动画 这个过长动画的第一帧执行的是fade-appear</span>
        <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>
        hello world <span class="token operator">!</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>CSSTransition<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="_10-2-2-钩子函数"><a href="#_10-2-2-钩子函数" aria-hidden="true" class="header-anchor">#</a> 10.2.2 钩子函数</h4> <p>onEntered（完全进入第三针 DONE）onEnter （入场动画执行的第一帧） onEntering（入场动画执行的第二帧） onExit（出去）onExited onExiting</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  onEntered<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">（el）</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token comment">//钩子函数  完全进入之后  el是当前动画的动画节点</span>
                   el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span>  <span class="token comment">//对执行动画的节点经行操作</span>
                  <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_10-2-3-多个-dom-元素的动画效果"><a href="#_10-2-3-多个-dom-元素的动画效果" aria-hidden="true" class="header-anchor">#</a> 10.2.3 多个 DOM 元素的动画效果</h4> <p>在 CSSTransition 外部增加一个 TransitionGroup 组件 这个时候 IN 这个属性就不需要使用了</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token string">'bootstrap/dist/css/bootstrap.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Link<span class="token punctuation">,</span> Prompt<span class="token punctuation">,</span> Redirect<span class="token punctuation">,</span> Switch<span class="token punctuation">,</span> withRouter<span class="token punctuation">,</span> NavLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
<span class="token keyword">import</span> <span class="token string">'./transation.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> TransitionGroup<span class="token punctuation">,</span> CSSTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-transition-group'</span>
<span class="token keyword">const</span> <span class="token function-variable function">AppRouter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ul className<span class="token operator">=</span><span class="token string">&quot;nav nav-pills&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>li role<span class="token operator">=</span><span class="token string">&quot;presentation&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/red&quot;</span><span class="token operator">&gt;</span>red<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>li role<span class="token operator">=</span><span class="token string">&quot;presentation&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/green&quot;</span><span class="token operator">&gt;</span>green<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>li role<span class="token operator">=</span><span class="token string">&quot;presentation&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/blue&quot;</span><span class="token operator">&gt;</span>blue<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>li role<span class="token operator">=</span><span class="token string">&quot;presentation&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/pink&quot;</span><span class="token operator">&gt;</span>pink<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route
          render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> location <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>TransitionGroup<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>CSSTransition timeout<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">3000</span><span class="token punctuation">}</span> classNames<span class="token operator">=</span><span class="token string">&quot;fade&quot;</span> key<span class="token operator">=</span><span class="token punctuation">{</span>location<span class="token punctuation">.</span>key<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>Redirect exact <span class="token keyword">from</span><span class="token operator">=</span><span class="token string">&quot;/&quot;</span> to<span class="token operator">=</span><span class="token string">&quot;/red&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/red&quot;</span> render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;red&quot;</span><span class="token operator">&gt;</span>red<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/green&quot;</span> render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;green&quot;</span><span class="token operator">&gt;</span>green<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/blue&quot;</span> render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span><span class="token operator">&gt;</span>blue<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/pink&quot;</span> render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;pink&quot;</span><span class="token operator">&gt;</span>pink<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>CSSTransition<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>TransitionGroup<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> AppRouter
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><ol><li>在需要经行过度切换的路由上包裹一个 route 不进行匹配这样可以获取{location}对象</li> <li>或者使用 withRoute 高级组件进行包裹也可以</li> <li>使用 TransitionGroup 和 CSSTransition 包裹 route 元素组</li> <li>CSSTransition 上要设置 key 才可以使用 key 标识为 location.key</li> <li>css 上可设置属性 timeout 动画时间 classNames 动画效果</li> <li>动画过程会触发两个类 .fade-enter 和.fade-enter.fade-enter-active 可以进行自定义动画</li></ol> <p>​</p> <h2 id="_11、react-的项目结构"><a href="#_11、react-的项目结构" aria-hidden="true" class="header-anchor">#</a> 11、React 的项目结构</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>src<span class="token operator">-</span>
    index<span class="token punctuation">.</span>js  负责渲染 和 中间件
	App<span class="token punctuation">.</span>js  负责引用组件 组装 app
	components<span class="token operator">-</span> 内部全是组件
		index<span class="token punctuation">.</span>js 负责导出所有组件
        Header<span class="token operator">-</span>
        	index<span class="token punctuation">.</span>js 或者 Header<span class="token punctuation">.</span>js
			index<span class="token punctuation">.</span>css 还有其他的文件
		Body<span class="token operator">-</span>
            index<span class="token punctuation">.</span>js 或者 Body<span class="token punctuation">.</span>js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></div> <!----> <footer class="page-edit"><!----> <!----></footer> <!----> </main> <div class="valine-wrapper" data-v-5029e45b><div id="valine" data-v-5029e45b></div></div></div> <div class="back-to-ceiling" style="right:1rem;bottom:3rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-d0bfeaa4 data-v-d0bfeaa4><i class="iconfont reco-up" data-v-d0bfeaa4></i></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.565ad12a.js" defer></script><script src="/assets/js/4.ed939ccf.js" defer></script><script src="/assets/js/1.0b802b94.js" defer></script><script src="/assets/js/30.c9db3a1b.js" defer></script>
  </body>
</html>

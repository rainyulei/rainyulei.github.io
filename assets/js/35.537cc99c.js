(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{301:function(e,t,a){"use strict";a.r(t);var s=a(0),n=Object(s.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"react-router-中文文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-router-中文文档","aria-hidden":"true"}},[e._v("#")]),e._v(" React Router 中文文档")]),e._v(" "),a("p",[e._v("本篇文档转发自\nchillyme 发布在 https://segmentfault.com/a/1190000014294604")]),e._v(" "),a("blockquote",[a("p",[e._v("官方英文文档 - "),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/BrowserRouter",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://reacttraining.com/rea..."),a("OutboundLink")],1),e._v("\n版本 - "),a("code",[e._v("v4.2.0")])])]),e._v(" "),a("h2",{attrs:{id:"browserrouter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#browserrouter","aria-hidden":"true"}},[e._v("#")]),e._v(" BrowserRouter")]),e._v(" "),a("p",[a("code",[e._v("<BrowserRouter>")]),e._v(" 使用 HTML5 提供的 history API ("),a("code",[e._v("pushState")]),e._v(", "),a("code",[e._v("replaceState")]),e._v(" 和 "),a("code",[e._v("popstate")]),e._v(" 事件) 来保持 UI 和 URL 的同步。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("import { BrowserRouter } from 'react-router-dom';\n\n<BrowserRouter\n  basename={string}\n  forceRefresh={bool}\n  getUserConfirmation={func}\n  keyLength={number}\n>\n  <App />\n</BrowserRouter>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br")])]),a("h4",{attrs:{id:"basename-string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#basename-string","aria-hidden":"true"}},[e._v("#")]),e._v(" basename: string")]),e._v(" "),a("p",[e._v("所有位置的基准 URL。如果你的应用程序部署在服务器的子目录，则需要将其设置为子目录。"),a("code",[e._v("basename")]),e._v(" 的正确格式是前面有一个前导斜杠，但不能有尾部斜杠。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<BrowserRouter basename="/calendar">\n  <Link to="/today" />\n</BrowserRouter>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("上例中的 "),a("code",[e._v("<Link>")]),e._v(" 最终将被呈现为：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<a href="/calendar/today" />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"forcerefresh-bool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#forcerefresh-bool","aria-hidden":"true"}},[e._v("#")]),e._v(" forceRefresh: bool")]),e._v(" "),a("p",[e._v("如果为 "),a("code",[e._v("true")]),e._v(" ，在导航的过程中整个页面将会刷新。一般情况下，只有在不支持 HTML5 history API 的浏览器中使用此功能。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const supportsHistory = 'pushState' in window.history;\n\n<BrowserRouter forceRefresh={!supportsHistory} />\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h4",{attrs:{id:"getuserconfirmation-func"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getuserconfirmation-func","aria-hidden":"true"}},[e._v("#")]),e._v(" getUserConfirmation: func")]),e._v(" "),a("p",[e._v("用于确认导航的函数，默认使用 "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm",target:"_blank",rel:"noopener noreferrer"}},[e._v("window.confirm"),a("OutboundLink")],1),e._v("。例如，当从 "),a("code",[e._v("/a")]),e._v(" 导航至 "),a("code",[e._v("/b")]),e._v(" 时，会使用默认的 "),a("code",[e._v("confirm")]),e._v(" 函数弹出一个提示，用户点击确定后才进行导航，否则不做任何处理。译注：需要配合 "),a("code",[e._v("<Prompt>")]),e._v(" 一起使用。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// 这是默认的确认函数\nconst getConfirmation = (message, callback) => {\n  const allowTransition = window.confirm(message);\n  callback(allowTransition);\n}\n\n<BrowserRouter getUserConfirmation={getConfirmation} />\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("h4",{attrs:{id:"keylength-number"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#keylength-number","aria-hidden":"true"}},[e._v("#")]),e._v(" keyLength: number")]),e._v(" "),a("p",[a("code",[e._v("location.key")]),e._v(" 的长度，默认为 "),a("code",[e._v("6")]),e._v("。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<BrowserRouter keyLength={12} />\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"children-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#children-node","aria-hidden":"true"}},[e._v("#")]),e._v(" children: node")]),e._v(" "),a("p",[e._v("要呈现的"),a("a",{attrs:{href:"https://reactjs.org/docs/react-api.html#react.children.only",target:"_blank",rel:"noopener noreferrer"}},[e._v("单个子元素（组件）"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("h2",{attrs:{id:"hashrouter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hashrouter","aria-hidden":"true"}},[e._v("#")]),e._v(" HashRouter")]),e._v(" "),a("p",[a("code",[e._v("<HashRouter>")]),e._v(" 使用 URL 的 "),a("code",[e._v("hash")]),e._v(" 部分（即 "),a("code",[e._v("window.location.hash")]),e._v("）来保持 UI 和 URL 的同步。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("import { HashRouter } from 'react-router-dom';\n\n<HashRouter>\n  <App />\n</HashRouter>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("blockquote",[a("p",[e._v("注意： 使用 "),a("code",[e._v("hash")]),e._v(" 记录导航历史不支持 "),a("code",[e._v("location.key")]),e._v(" 和 "),a("code",[e._v("location.state")]),e._v("。在以前的版本中，我们视图 shim 这种行为，但是仍有一些问题我们无法解决。任何依赖此行为的代码或插件都将无法正常使用。由于该技术仅用于支持旧式（低版本）浏览器，因此对于一些新式浏览器，我们鼓励你使用 "),a("code",[e._v("<BrowserHistory>")]),e._v(" 代替。")])]),e._v(" "),a("h4",{attrs:{id:"basename-string-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#basename-string-2","aria-hidden":"true"}},[e._v("#")]),e._v(" basename: string")]),e._v(" "),a("p",[e._v("所有位置的基准 URL。"),a("code",[e._v("basename")]),e._v(" 的正确格式是前面有一个前导斜杠，但不能有尾部斜杠。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<HashRouter basename="/calendar">\n  <Link to="/today" />\n</HashRouter>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("上例中的 "),a("code",[e._v("<Link>")]),e._v(" 最终将被呈现为：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<a href="#/calendar/today" />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"getuserconfirmation-func-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getuserconfirmation-func-2","aria-hidden":"true"}},[e._v("#")]),e._v(" getUserConfirmation: func")]),e._v(" "),a("p",[e._v("用于确认导航的函数，默认使用 "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm",target:"_blank",rel:"noopener noreferrer"}},[e._v("window.confirm"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// 这是默认的确认函数\nconst getConfirmation = (message, callback) => {\n  const allowTransition = window.confirm(message);\n  callback(allowTransition);\n}\n\n<HashRouter getUserConfirmation={getConfirmation} />\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("h4",{attrs:{id:"hashtype-string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hashtype-string","aria-hidden":"true"}},[e._v("#")]),e._v(" hashType: string")]),e._v(" "),a("p",[a("code",[e._v("window.location.hash")]),e._v(" 使用的 "),a("code",[e._v("hash")]),e._v(" 类型，有如下几种：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("slash")]),e._v(" - 后面跟一个斜杠，例如 #/ 和 #/sunshine/lollipops")]),e._v(" "),a("li",[a("code",[e._v("noslash")]),e._v(" - 后面没有斜杠，例如 # 和 #sunshine/lollipops")]),e._v(" "),a("li",[a("code",[e._v("hashbang")]),e._v(" - Google 风格的 "),a("a",{attrs:{href:"https://developers.google.com/webmasters/ajax-crawling/docs/learn-more",target:"_blank",rel:"noopener noreferrer"}},[e._v("ajax crawlable"),a("OutboundLink")],1),e._v("，例如 #!/ 和 #!/sunshine/lollipops")])]),e._v(" "),a("p",[e._v("默认为 "),a("code",[e._v("slash")]),e._v("。")]),e._v(" "),a("h4",{attrs:{id:"children-node-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#children-node-2","aria-hidden":"true"}},[e._v("#")]),e._v(" children: node")]),e._v(" "),a("p",[e._v("要呈现的"),a("a",{attrs:{href:"https://reactjs.org/docs/react-api.html#react.children.only",target:"_blank",rel:"noopener noreferrer"}},[e._v("单个子元素（组件）"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("h2",{attrs:{id:"link"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#link","aria-hidden":"true"}},[e._v("#")]),e._v(" Link")]),e._v(" "),a("p",[e._v("为你的应用提供声明式的、可访问的导航链接。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("import { Link } from 'react-router-dom';\n\n<Link to=\"/about\">About</Link>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h4",{attrs:{id:"to-string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#to-string","aria-hidden":"true"}},[e._v("#")]),e._v(" to: string")]),e._v(" "),a("p",[e._v("一个字符串形式的链接地址，通过 "),a("code",[e._v("pathname")]),e._v("、"),a("code",[e._v("search")]),e._v(" 和 "),a("code",[e._v("hash")]),e._v(" 属性创建。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<Link to='/courses?sort=name' />\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"to-object"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#to-object","aria-hidden":"true"}},[e._v("#")]),e._v(" to: object")]),e._v(" "),a("p",[e._v("一个对象形式的链接地址，可以具有以下任何属性：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("pathname")]),e._v(" - 要链接到的路径")]),e._v(" "),a("li",[a("code",[e._v("search")]),e._v(" - 查询参数")]),e._v(" "),a("li",[a("code",[e._v("hash")]),e._v(" - URL 中的 hash，例如 #the-hash")]),e._v(" "),a("li",[a("code",[e._v("state")]),e._v(" - 存储到 location 中的额外状态数据")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<Link to={{\n  pathname: '/courses',\n  search: '?sort=name',\n  hash: '#the-hash',\n  state: {\n    fromDashboard: true\n  }\n}} />\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("h4",{attrs:{id:"replace-bool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#replace-bool","aria-hidden":"true"}},[e._v("#")]),e._v(" replace: bool")]),e._v(" "),a("p",[e._v("当设置为 "),a("code",[e._v("true")]),e._v(" 时，点击链接后将替换历史堆栈中的当前条目，而不是添加新条目。默认为 "),a("code",[e._v("false")]),e._v("。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<Link to="/courses" replace />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"innerref-func"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#innerref-func","aria-hidden":"true"}},[e._v("#")]),e._v(" innerRef: func")]),e._v(" "),a("p",[e._v("允许访问组件的底层引用。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('const refCallback = node => {\n  // node 指向最终挂载的 DOM 元素，在卸载时为 null\n}\n\n<Link to="/" innerRef={refCallback} />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h4",{attrs:{id:"others"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#others","aria-hidden":"true"}},[e._v("#")]),e._v(" others")]),e._v(" "),a("p",[e._v("你还可以传递一些其它属性，例如 "),a("code",[e._v("title")]),e._v("、"),a("code",[e._v("id")]),e._v(" 或 "),a("code",[e._v("className")]),e._v(" 等。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<Link to="/" className="nav" title="a title">About</Link>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h2",{attrs:{id:"navlink"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#navlink","aria-hidden":"true"}},[e._v("#")]),e._v(" NavLink")]),e._v(" "),a("p",[e._v("一个特殊版本的 "),a("code",[e._v("<Link>")]),e._v("，它会在与当前 URL 匹配时为其呈现元素添加样式属性。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("import { NavLink } from 'react-router-dom';\n\n<NavLink to=\"/about\">About</NavLink>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h4",{attrs:{id:"activeclassname-string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#activeclassname-string","aria-hidden":"true"}},[e._v("#")]),e._v(" activeClassName: string")]),e._v(" "),a("p",[e._v("当元素处于激活状态时应用的类，默认为 "),a("code",[e._v("active")]),e._v("。它将与 "),a("code",[e._v("className")]),e._v(" 属性一起使用。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<NavLink to="/faq" activeClassName="selected">FAQs</NavLink>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"activestyle-object"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#activestyle-object","aria-hidden":"true"}},[e._v("#")]),e._v(" activeStyle: object")]),e._v(" "),a("p",[e._v("当元素处于激活状态时应用的样式。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const activeStyle = {\n  fontWeight: 'bold',\n  color: 'red'\n};\n\n<NavLink to=\"/faq\" activeStyle={activeStyle}>FAQs</NavLink>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("h4",{attrs:{id:"exact-bool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#exact-bool","aria-hidden":"true"}},[e._v("#")]),e._v(" exact: bool")]),e._v(" "),a("p",[e._v("如果为 "),a("code",[e._v("true")]),e._v("，则只有在位置完全匹配时才应用激活类/样式。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<NavLink exact to="/profile">Profile</NavLink>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"strict-bool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#strict-bool","aria-hidden":"true"}},[e._v("#")]),e._v(" strict: bool")]),e._v(" "),a("p",[e._v("如果为 "),a("code",[e._v("true")]),e._v("，则在确定位置是否与当前 URL 匹配时，将考虑位置的路径名后面的斜杠。有关更多信息，请参阅 "),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/Route/strict-bool",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1),e._v(" 文档。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<NavLink strict to="/events/">Events</NavLink>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"isactive-func"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#isactive-func","aria-hidden":"true"}},[e._v("#")]),e._v(" isActive: func")]),e._v(" "),a("p",[e._v("添加额外逻辑以确定链接是否处于激活状态的函数。如果你要做的不仅仅是验证链接的路径名与当前 URL 的路径名相匹配，那么应该使用它。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('// 只有当事件 id 为奇数时才考虑激活\nconst oddEvent = (match, location) => {\n  if (!match) {\n    return false;\n  }\n  const eventID = parseInt(match.params.eventID);\n  return !isNaN(eventID) && eventID % 2 === 1;\n}\n\n<NavLink to="/events/123" isActive={oddEvent}>Event 123</NavLink>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br")])]),a("h4",{attrs:{id:"location-object"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#location-object","aria-hidden":"true"}},[e._v("#")]),e._v(" location: object")]),e._v(" "),a("p",[a("code",[e._v("isActive")]),e._v(" 默认比较当前历史位置（通常是当前的浏览器 URL）。你也可以传递一个不同的位置进行比较。")]),e._v(" "),a("h2",{attrs:{id:"prompt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prompt","aria-hidden":"true"}},[e._v("#")]),e._v(" Prompt")]),e._v(" "),a("p",[e._v("用于在位置跳转之前给予用户一些确认信息。当你的应用程序进入一个应该阻止用户导航的状态时（比如表单只填写了一半），弹出一个提示。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("import { Prompt } from 'react-router-dom';\n\n<Prompt\n  when={formIsHalfFilledOut}\n  message=\"你确定要离开当前页面吗？\"\n/>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("h4",{attrs:{id:"message-string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#message-string","aria-hidden":"true"}},[e._v("#")]),e._v(" message: string")]),e._v(" "),a("p",[e._v("当用户试图离开某个位置时弹出的提示信息。默认使用 window。confirm")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<Prompt message="你确定要离开当前页面吗？" />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"message-func"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#message-func","aria-hidden":"true"}},[e._v("#")]),e._v(" message: func")]),e._v(" "),a("p",[e._v("将在用户试图导航到下一个位置时调用。需要返回一个字符串以向用户显示提示，或者返回 "),a("code",[e._v("true")]),e._v(" 以允许直接跳转。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<Prompt message={location => {\n  const isApp = location.pathname.startsWith('/app');\n\n  return isApp ? `你确定要跳转到${location.pathname}吗？` : true;\n}} />\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("blockquote",[a("p",[e._v("译注：上例中的 "),a("code",[e._v("location")]),e._v(" 对象指的是下一个位置（即用户想要跳转到的位置）。你可以基于它包含的一些信息，判断是否阻止导航，或者允许直接跳转。")])]),e._v(" "),a("h4",{attrs:{id:"when-bool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#when-bool","aria-hidden":"true"}},[e._v("#")]),e._v(" when: bool")]),e._v(" "),a("p",[e._v("在应用程序中，你可以始终渲染 "),a("code",[e._v("<Prompt>")]),e._v(" 组件，并通过设置 "),a("code",[e._v("when={true}")]),e._v(" 或 "),a("code",[e._v("when={false}")]),e._v(" 以阻止或允许相应的导航，而不是根据某些条件来决定是否渲染 "),a("code",[e._v("<Prompt>")]),e._v(" 组件。")]),e._v(" "),a("blockquote",[a("p",[e._v("译注："),a("code",[e._v("when")]),e._v(" 只有两种情况，当它的值为 "),a("code",[e._v("true")]),e._v(" 时，会弹出提示信息。如果为 "),a("code",[e._v("false")]),e._v(" 则不会弹出。见"),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/example/preventing-transitions",target:"_blank",rel:"noopener noreferrer"}},[e._v("阻止导航"),a("OutboundLink")],1),e._v("示例。")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<Prompt when={true} message="你确定要离开当前页面吗？" />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h2",{attrs:{id:"memoryrouter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#memoryrouter","aria-hidden":"true"}},[e._v("#")]),e._v(" MemoryRouter")]),e._v(" "),a("p",[e._v("将 URL 的历史记录保存在内存中的 "),a("code",[e._v("<Router>")]),e._v("（不读取或写入地址栏）。在测试和非浏览器环境中很有用，例如 "),a("a",{attrs:{href:"https://facebook.github.io/react-native/",target:"_blank",rel:"noopener noreferrer"}},[e._v("React Native"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("import { MemoryRouter } from 'react-router-dom';\n\n<MemoryRouter>\n  <App />\n</MemoryRouter>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h4",{attrs:{id:"initialentries-array"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#initialentries-array","aria-hidden":"true"}},[e._v("#")]),e._v(" initialEntries: array")]),e._v(" "),a("p",[e._v("历史堆栈中的一系列位置信息。这些可能是带有 "),a("code",[e._v("{pathname, search, hash, state}")]),e._v(" 的完整位置对象或简单的字符串 URL。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<MemoryRouter\n  initialEntries={[ '/one', '/two', { pathname: '/three' } ]}\n  initialIndex={1}\n>\n  <App/>\n</MemoryRouter>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("h4",{attrs:{id:"initialindex-number"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#initialindex-number","aria-hidden":"true"}},[e._v("#")]),e._v(" initialIndex: number")]),e._v(" "),a("p",[a("code",[e._v("initialEntries")]),e._v(" 数组中的初始位置索引。")]),e._v(" "),a("h4",{attrs:{id:"getuserconfirmation-func-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getuserconfirmation-func-3","aria-hidden":"true"}},[e._v("#")]),e._v(" getUserConfirmation: func")]),e._v(" "),a("p",[e._v("用于确认导航的函数。当 "),a("code",[e._v("<MemoryRouter>")]),e._v(" 直接与 "),a("code",[e._v("<Prompt>")]),e._v(" 一起使用时，你必须使用此选项。")]),e._v(" "),a("h4",{attrs:{id:"keylength-number-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#keylength-number-2","aria-hidden":"true"}},[e._v("#")]),e._v(" keyLength: number")]),e._v(" "),a("p",[a("code",[e._v("location.key")]),e._v(" 的长度，默认为 "),a("code",[e._v("6")]),e._v("。")]),e._v(" "),a("h4",{attrs:{id:"children-node-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#children-node-3","aria-hidden":"true"}},[e._v("#")]),e._v(" children: node")]),e._v(" "),a("p",[e._v("要呈现的"),a("a",{attrs:{href:"https://reactjs.org/docs/react-api.html#react.children.only",target:"_blank",rel:"noopener noreferrer"}},[e._v("单个子元素（组件）"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("h2",{attrs:{id:"redirect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redirect","aria-hidden":"true"}},[e._v("#")]),e._v(" Redirect")]),e._v(" "),a("p",[e._v("使用 "),a("code",[e._v("<Redirect>")]),e._v(" 会导航到一个新的位置。新的位置将覆盖历史堆栈中的当前条目，例如服务器端重定向（HTTP 3xx）。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('import { Route, Redirect } from \'react-router-dom\';\n\n<Route exact path="/" render={() => (\n  loggedIn ? (\n    <Redirect to="/dashboard" />\n  ) : (\n    <PublicHomePage />\n  )\n)} />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br")])]),a("h4",{attrs:{id:"to-string-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#to-string-2","aria-hidden":"true"}},[e._v("#")]),e._v(" to: string")]),e._v(" "),a("p",[e._v("要重定向到的 URL，可以是 "),a("a",{attrs:{href:"https://www.npmjs.com/package/path-to-regexp",target:"_blank",rel:"noopener noreferrer"}},[e._v("path-to-regexp"),a("OutboundLink")],1),e._v(" 能够理解的任何有效的 URL 路径。所有要使用的 URL 参数必须由 "),a("code",[e._v("from")]),e._v(" 提供。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<Redirect to="/somewhere/else" />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"to-object-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#to-object-2","aria-hidden":"true"}},[e._v("#")]),e._v(" to: object")]),e._v(" "),a("p",[e._v("要重定向到的位置，其中 "),a("code",[e._v("pathname")]),e._v(" 可以是 "),a("a",{attrs:{href:"https://www.npmjs.com/package/path-to-regexp",target:"_blank",rel:"noopener noreferrer"}},[e._v("path-to-regexp"),a("OutboundLink")],1),e._v(" 能够理解的任何有效的 URL 路径。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<Redirect to={{\n  pathname: '/login',\n  search: '?utm=your+face',\n  state: {\n    referrer: currentLocation\n  }\n}} />\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("上例中的 "),a("code",[e._v("state")]),e._v(" 对象可以在重定向到的组件中通过 "),a("code",[e._v("this.props.location.state")]),e._v(" 进行访问。而 "),a("code",[e._v("referrer")]),e._v(" 键（不是特殊名称）将通过路径名 "),a("code",[e._v("/login")]),e._v(" 指向的登录组件中的 "),a("code",[e._v("this.props.location.state.referrer")]),e._v(" 进行访问。")]),e._v(" "),a("h4",{attrs:{id:"push-bool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#push-bool","aria-hidden":"true"}},[e._v("#")]),e._v(" push: bool")]),e._v(" "),a("p",[e._v("如果为 "),a("code",[e._v("true")]),e._v("，重定向会将新的位置推入历史记录，而不是替换当前条目。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<Redirect push to="/somewhere/else" />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"from-string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#from-string","aria-hidden":"true"}},[e._v("#")]),e._v(" from: string")]),e._v(" "),a("p",[e._v("要从中进行重定向的路径名，可以是 "),a("a",{attrs:{href:"https://www.npmjs.com/package/path-to-regexp",target:"_blank",rel:"noopener noreferrer"}},[e._v("path-to-regexp"),a("OutboundLink")],1),e._v(" 能够理解的任何有效的 URL 路径。所有匹配的 URL 参数都会提供给 "),a("code",[e._v("to")]),e._v("，必须包含在 "),a("code",[e._v("to")]),e._v(" 中用到的所有参数，"),a("code",[e._v("to")]),e._v(" 未使用的其它参数将被忽略。")]),e._v(" "),a("p",[a("strong",[e._v("只能在 "),a("code",[e._v("<Switch>")]),e._v(" 组件内使用 "),a("code",[e._v("<Redirect from>")])]),e._v("，以匹配一个位置。有关更多细节，请参阅 "),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/Switch/children-node",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1),e._v("。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<Switch>\n  <Redirect from='/old-path' to='/new-path' />\n  <Route path='/new-path' component={Place} />\n</Switch>\n// 根据匹配参数进行重定向\n<Switch>\n  <Redirect from='/users/:id' to='/users/profile/:id' />\n  <Route path='/users/profile/:id' component={Profile} />\n</Switch>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br")])]),a("blockquote",[a("p",[e._v("译注：经过实践，发现以上“根据匹配参数进行重定向”的示例存在 bug，没有效果。"),a("code",[e._v("to")]),e._v(" 中的 "),a("code",[e._v(":id")]),e._v(" 并不会继承 "),a("code",[e._v("from")]),e._v(" 中的 "),a("code",[e._v(":id")]),e._v(" 匹配的值，而是直接作为字符串显示到浏览器地址栏！！！")])]),e._v(" "),a("h4",{attrs:{id:"exact-bool-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#exact-bool-2","aria-hidden":"true"}},[e._v("#")]),e._v(" exact: bool")]),e._v(" "),a("p",[e._v("完全匹配，相当于 "),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/Route/exact-bool",target:"_blank",rel:"noopener noreferrer"}},[e._v("Route.exact"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("h4",{attrs:{id:"strict-bool-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#strict-bool-2","aria-hidden":"true"}},[e._v("#")]),e._v(" strict: bool")]),e._v(" "),a("p",[e._v("严格匹配，相当于 "),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/Route/strict-bool",target:"_blank",rel:"noopener noreferrer"}},[e._v("Route.strict"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("h2",{attrs:{id:"route"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#route","aria-hidden":"true"}},[e._v("#")]),e._v(" Route")]),e._v(" "),a("p",[a("code",[e._v("<Route>")]),e._v(" 可能是 React Router 中最重要的组件，它可以帮助你理解和学习如何更好的使用 React Router。它最基本的职责是在其 "),a("code",[e._v("path")]),e._v(" 属性与某个 "),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/location",target:"_blank",rel:"noopener noreferrer"}},[e._v("location"),a("OutboundLink")],1),e._v(" 匹配时呈现一些 UI。")]),e._v(" "),a("p",[e._v("请考虑以下代码：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('import { BrowserRouter as Router, Route } from \'react-router-dom\';\n\n<Router>\n  <div>\n    <Route exact path="/" component={Home} />\n    <Route path="/news" component={News} />\n  </div>\n</Router>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("p",[e._v("如果应用程序的位置是 "),a("code",[e._v("/")]),e._v("，那么 UI 的层次结构将会是：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<div>\n  <Home />\n  \x3c!-- react-empty: 2 --\x3e\n</div>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("或者，如果应用程序的位置是 "),a("code",[e._v("/news")]),e._v("，那么 UI 的层次结构将会是：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<div>\n  \x3c!-- react-empty: 1 --\x3e\n  <News />\n</div>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("其中 "),a("code",[e._v("react-empty")]),e._v(" 注释只是 React 空渲染的实现细节。但对于我们的目的而言，它是有启发性的。路由始终在技术上被“渲染”，即使它的渲染为空。只要应用程序的位置匹配 "),a("code",[e._v("<Route>")]),e._v(" 的 "),a("code",[e._v("path")]),e._v("，你的组件就会被渲染。")]),e._v(" "),a("h4",{attrs:{id:"route-render-methods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#route-render-methods","aria-hidden":"true"}},[e._v("#")]),e._v(" Route render methods")]),e._v(" "),a("p",[e._v("使用 "),a("code",[e._v("<Route>")]),e._v(" 渲染一些内容有以下三种方式：")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/Route/component",target:"_blank",rel:"noopener noreferrer"}},[e._v("component"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/Route/render-func",target:"_blank",rel:"noopener noreferrer"}},[e._v("render"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/Route/children-func",target:"_blank",rel:"noopener noreferrer"}},[e._v("children"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("在不同的情况下使用不同的方式。在指定的 "),a("code",[e._v("<Route>")]),e._v(" 中，你应该只使用其中的一种。请参阅下面的解释，了解为什么有三个选项。大多数情况下你会使用 "),a("code",[e._v("component")]),e._v("。")]),e._v(" "),a("h4",{attrs:{id:"route-props"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#route-props","aria-hidden":"true"}},[e._v("#")]),e._v(" Route props")]),e._v(" "),a("p",[e._v("三种渲染方式都将提供相同的三个路由属性：")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/match",target:"_blank",rel:"noopener noreferrer"}},[e._v("match"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/location",target:"_blank",rel:"noopener noreferrer"}},[e._v("location"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/history",target:"_blank",rel:"noopener noreferrer"}},[e._v("history"),a("OutboundLink")],1)])]),e._v(" "),a("h4",{attrs:{id:"component"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#component","aria-hidden":"true"}},[e._v("#")]),e._v(" component")]),e._v(" "),a("p",[e._v("指定只有当位置匹配时才会渲染的 React 组件，该组件会接收 "),a("a",{attrs:{href:"http://reacttraining.cn/web/api/Route/Route-props",target:"_blank",rel:"noopener noreferrer"}},[e._v("route props"),a("OutboundLink")],1),e._v(" 作为属性。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('const User = ({ match }) => {\n  return <h1>Hello {match.params.username}!</h1>\n}\n\n<Route path="/user/:username" component={User} />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("当你使用 "),a("code",[e._v("component")]),e._v("（而不是 "),a("code",[e._v("render")]),e._v(" 或 "),a("code",[e._v("children")]),e._v("）时，Router 将根据指定的组件，使用 "),a("code",[e._v("React.createElement")]),e._v(" 创建一个新的 React 元素。这意味着，如果你向 "),a("code",[e._v("component")]),e._v(" 提供一个内联函数，那么每次渲染都会创建一个新组件。这将导致现有组件的卸载和新组件的安装，而不是仅仅更新现有组件。当使用内联函数进行内联渲染时，请使用 "),a("code",[e._v("render")]),e._v(" 或 "),a("code",[e._v("children")]),e._v("（见下文）。")]),e._v(" "),a("h4",{attrs:{id:"render-func"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#render-func","aria-hidden":"true"}},[e._v("#")]),e._v(" render: func")]),e._v(" "),a("p",[e._v("使用 "),a("code",[e._v("render")]),e._v(" 可以方便地进行内联渲染和包装，而无需进行上文解释的不必要的组件重装。")]),e._v(" "),a("p",[e._v("你可以传入一个函数，以在位置匹配时调用，而不是使用 "),a("code",[e._v("component")]),e._v(" 创建一个新的 React 元素。"),a("code",[e._v("render")]),e._v(" 渲染方式接收所有与 "),a("code",[e._v("component")]),e._v(" 方式相同的 "),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/Route/route-props",target:"_blank",rel:"noopener noreferrer"}},[e._v("route props"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('// 方便的内联渲染\n<Route path="/home" render={() => <div>Home</div>} />\n\n// 包装\nconst FadingRoute = ({ component: Component, ...rest }) => (\n  <Route {...rest} render={props => (\n    <FadeIn>\n      <Component {...props} />\n    </FadeIn>\n  )} />\n)\n\n<FadingRoute path="/cool" component={Something} />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br")])]),a("blockquote",[a("p",[e._v("警告："),a("code",[e._v("<Route component>")]),e._v(" 优先于 "),a("code",[e._v("<Route render>")]),e._v("，因此不要在同一个 "),a("code",[e._v("<Route>")]),e._v(" 中同时使用两者。")])]),e._v(" "),a("h4",{attrs:{id:"children-func"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#children-func","aria-hidden":"true"}},[e._v("#")]),e._v(" children: func")]),e._v(" "),a("p",[e._v("有时候不论 "),a("code",[e._v("path")]),e._v(" 是否匹配位置，你都想渲染一些内容。在这种情况下，你可以使用 "),a("code",[e._v("children")]),e._v(" 属性。除了不论是否匹配它都会被调用以外，它的工作原理与 "),a("code",[e._v("render")]),e._v(" 完全一样。")]),e._v(" "),a("p",[a("code",[e._v("children")]),e._v(" 渲染方式接收所有与 "),a("code",[e._v("component")]),e._v(" 和 "),a("code",[e._v("render")]),e._v(" 方式相同的 "),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/Route/route-props",target:"_blank",rel:"noopener noreferrer"}},[e._v("route props"),a("OutboundLink")],1),e._v("，除非路由与 URL 不匹配，不匹配时 "),a("code",[e._v("match")]),e._v(" 为 "),a("code",[e._v("null")]),e._v("。这允许你可以根据路由是否匹配动态地调整用户界面。如下所示，如果路由匹配，我们将添加一个激活类：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const ListItemLink = ({ to, ...rest }) => (\n  <Route path={to} children={({ match }) => (\n    <li className={match ? 'active' : ''}>\n      <Link to={to} {...rest} />\n    </li>\n  )} />\n)\n\n<ul>\n  <ListItemLink to=\"/somewhere\" />\n  <ListItemLink to=\"/somewhere-else\" />\n</ul>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br")])]),a("p",[e._v("这对动画也很有用：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<Route children={({ match, ...rest }) => (\n  {/* Animate 将始终渲染，因此你可以利用生命周期来为其子元素添加进出动画 */}\n  <Animate>\n    {match && <Something {...rest} />}\n  </Animate>\n)} />\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("blockquote",[a("p",[e._v("警告："),a("code",[e._v("<Route component>")]),e._v(" 和 "),a("code",[e._v("<Route render>")]),e._v(" 优先于 "),a("code",[e._v("<Route children>")]),e._v("，因此不要在同一个 "),a("code",[e._v("<Route>")]),e._v(" 中同时使用多个。")])]),e._v(" "),a("h4",{attrs:{id:"path-string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#path-string","aria-hidden":"true"}},[e._v("#")]),e._v(" path: string")]),e._v(" "),a("p",[e._v("可以是 "),a("a",{attrs:{href:"https://www.npmjs.com/package/path-to-regexp",target:"_blank",rel:"noopener noreferrer"}},[e._v("path-to-regexp"),a("OutboundLink")],1),e._v(" 能够理解的任何有效的 URL 路径。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<Route path="/users/:id" component={User} />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("没有定义 "),a("code",[e._v("path")]),e._v(" 的 "),a("code",[e._v("<Route>")]),e._v(" 总是会被匹配。")]),e._v(" "),a("h4",{attrs:{id:"exact-bool-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#exact-bool-3","aria-hidden":"true"}},[e._v("#")]),e._v(" exact: bool")]),e._v(" "),a("p",[e._v("如果为 "),a("code",[e._v("true")]),e._v("，则只有在 "),a("code",[e._v("path")]),e._v(" 完全匹配 "),a("code",[e._v("location.pathname")]),e._v(" 时才匹配。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<Route exact path="/one" component={OneComponent} />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"strict-bool-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#strict-bool-3","aria-hidden":"true"}},[e._v("#")]),e._v(" strict: bool")]),e._v(" "),a("p",[e._v("如果为 "),a("code",[e._v("true")]),e._v("，则具有尾部斜杠的 "),a("code",[e._v("path")]),e._v(" 仅与具有尾部斜杠的 "),a("code",[e._v("location.pathname")]),e._v(" 匹配。当 "),a("code",[e._v("location.pathname")]),e._v(" 中有附加的 URL 片段时，"),a("code",[e._v("strict")]),e._v(" 就没有效果了。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<Route strict path="/one/" component={OneComponent} />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("blockquote",[a("p",[e._v("警告：可以使用 "),a("code",[e._v("strict")]),e._v(" 来强制规定 "),a("code",[e._v("location.pathname")]),e._v(" 不能具有尾部斜杠，但是为了做到这一点，"),a("code",[e._v("strict")]),e._v(" 和 "),a("code",[e._v("exact")]),e._v(" 必须都是 "),a("code",[e._v("true")]),e._v("。")])]),e._v(" "),a("h4",{attrs:{id:"location-object-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#location-object-2","aria-hidden":"true"}},[e._v("#")]),e._v(" location: object")]),e._v(" "),a("p",[e._v("一般情况下，"),a("code",[e._v("<Route>")]),e._v(" 尝试将其 "),a("code",[e._v("path")]),e._v(" 与当前历史位置（通常是当前的浏览器 URL）进行匹配。但是，也可以传递具有不同路径名的位置进行匹配。")]),e._v(" "),a("p",[e._v("当你需要将 "),a("code",[e._v("<Route>")]),e._v(" 与当前历史位置以外的 "),a("code",[e._v("location")]),e._v(" 进行匹配时，此功能非常有用。如"),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/example/animated-transitions",target:"_blank",rel:"noopener noreferrer"}},[e._v("过渡动画"),a("OutboundLink")],1),e._v("示例中所示。")]),e._v(" "),a("p",[e._v("如果一个 "),a("code",[e._v("<Route>")]),e._v(" 被包含在一个 "),a("code",[e._v("<Switch>")]),e._v(" 中，并且需要匹配的位置（或当前历史位置）传递给了 "),a("code",[e._v("<Switch>")]),e._v("，那么传递给 "),a("code",[e._v("<Route>")]),e._v(" 的 "),a("code",[e._v("location")]),e._v(" 将被 "),a("code",[e._v("<Switch>")]),e._v(" 所使用的 "),a("code",[e._v("location")]),e._v(" 覆盖。")]),e._v(" "),a("h4",{attrs:{id:"sensitive-bool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sensitive-bool","aria-hidden":"true"}},[e._v("#")]),e._v(" sensitive: bool")]),e._v(" "),a("p",[e._v("如果为 "),a("code",[e._v("true")]),e._v("，进行匹配时将区分大小写。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<Route sensitive path="/one" component={OneComponent} />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h2",{attrs:{id:"router"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#router","aria-hidden":"true"}},[e._v("#")]),e._v(" Router")]),e._v(" "),a("p",[e._v("所有 Router 组件的通用低阶接口。通常情况下，应用程序只会使用其中一个高阶 Router：")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/BrowserRouter",target:"_blank",rel:"noopener noreferrer"}},[e._v("BrowserRouter"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/HashRouter",target:"_blank",rel:"noopener noreferrer"}},[e._v("HashRouter"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/MemoryRouter",target:"_blank",rel:"noopener noreferrer"}},[e._v("MemoryRouter"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/native/api/NativeRouter",target:"_blank",rel:"noopener noreferrer"}},[e._v("NativeRouter"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/StaticRouter",target:"_blank",rel:"noopener noreferrer"}},[e._v("StaticRouter"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("使用低阶 "),a("Router",[e._v(" 的最常见用例是同步一个自定义历史记录与一个状态管理库，比如 Redux 或 Mobx。请注意，将 React Router 和状态管理库一起使用并不是必需的，它仅用于深度集成。")])],1),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("import { Router } from 'react-router-dom';\nimport createBrowserHistory from 'history/createBrowserHistory';\n\nconst history = createBrowserHistory();\n\n<Router history={history}>\n  <App />\n</Router>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("h4",{attrs:{id:"history-object"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#history-object","aria-hidden":"true"}},[e._v("#")]),e._v(" history: object")]),e._v(" "),a("p",[e._v("用于导航的历史记录对象。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("import createBrowserHistory from 'history/createBrowserHistory';\n\nconst customHistory = createBrowserHistory();\n\n<Router history={customHistory} />\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h4",{attrs:{id:"children-node-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#children-node-4","aria-hidden":"true"}},[e._v("#")]),e._v(" children: node")]),e._v(" "),a("p",[e._v("要呈现的"),a("a",{attrs:{href:"https://reactjs.org/docs/react-api.html#react.children.only",target:"_blank",rel:"noopener noreferrer"}},[e._v("单个子元素（组件）"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<Router>\n  <App />\n</Router>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h2",{attrs:{id:"staticrouter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#staticrouter","aria-hidden":"true"}},[e._v("#")]),e._v(" StaticRouter")]),e._v(" "),a("p",[e._v("一个永远不会改变位置的 "),a("code",[e._v("<Router>")]),e._v("。")]),e._v(" "),a("p",[e._v("这在服务器端渲染场景中非常有用，因为用户实际上没有点击，所以位置实际上并未发生变化。因此，名称是 "),a("code",[e._v("static")]),e._v("（静态的）。当你只需要插入一个位置，并在渲染输出上作出断言以便进行简单测试时，它也很有用。")]),e._v(" "),a("p",[e._v("以下是一个示例，node server 为 "),a("code",[e._v("<Redirect>")]),e._v(" 发送 302 状态码，并为其它请求发送常规 HTML：")]),e._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" createServer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'http'")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" React "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'react'")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" ReactDOMServer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'react-dom/server'")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" StaticRouter "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'react-router'")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 这个 context 对象包含了渲染的结果")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" context "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" html "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" ReactDOMServer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("renderToString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//服务端的路由渲染")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("StaticRouter location"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" context"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("App "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("StaticRouter"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 如果使用 <Redirect>，context.url 将包含要重定向到的 URL")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("302")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      Location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("url\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("else")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br"),a("span",{staticClass:"line-number"},[e._v("25")]),a("br"),a("span",{staticClass:"line-number"},[e._v("26")]),a("br"),a("span",{staticClass:"line-number"},[e._v("27")]),a("br")])]),a("h4",{attrs:{id:"basename-string-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#basename-string-3","aria-hidden":"true"}},[e._v("#")]),e._v(" basename: string")]),e._v(" "),a("p",[e._v("所有位置的基准 URL。"),a("code",[e._v("basename")]),e._v(" 的正确格式是前面有一个前导斜杠，但不能有尾部斜杠。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<StaticRouter basename="/calendar">\n  <Link to="/today" />\n</StaticRouter>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("上例中的 "),a("code",[e._v("<Link>")]),e._v(" 最终将被呈现为：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<a href="/calendar/today" />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"location-string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#location-string","aria-hidden":"true"}},[e._v("#")]),e._v(" location: string")]),e._v(" "),a("p",[e._v("服务器收到的 URL，可能是 node server 上的 "),a("code",[e._v("req.url")]),e._v("。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<StaticRouter location={req.url}>\n  <App />\n</StaticRouter>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h4",{attrs:{id:"location-object-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#location-object-3","aria-hidden":"true"}},[e._v("#")]),e._v(" location: object")]),e._v(" "),a("p",[e._v("一个形如 "),a("code",[e._v("{pathname, search, hash, state}")]),e._v(" 的位置对象。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<StaticRouter location={{ pathname: '/bubblegum' }}>\n  <App />\n</StaticRouter>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h4",{attrs:{id:"context-object"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#context-object","aria-hidden":"true"}},[e._v("#")]),e._v(" context: object")]),e._v(" "),a("p",[e._v("一个普通的 JavaScript 对象。在渲染过程中，组件可以向对象添加属性以存储有关渲染的信息。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const context = {};\n\n<StaticRouter context={context}>\n  <App />\n</StaticRouter>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("当一个 "),a("code",[e._v("<Route>")]),e._v(" 匹配时，它将把 context 对象传递给呈现为 "),a("code",[e._v("staticContext")]),e._v(" 的组件。查看"),a("a",{attrs:{href:"https://reacttraining.com/web/guides/server-rendering",target:"_blank",rel:"noopener noreferrer"}},[e._v("服务器渲染指南"),a("OutboundLink")],1),e._v("以获取有关如何自行完成此操作的更多信息。")]),e._v(" "),a("p",[e._v("渲染之后，可以使用这些属性来配置服务器的响应。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("if (context.status === '404') {\n  // ...\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h4",{attrs:{id:"children-node-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#children-node-5","aria-hidden":"true"}},[e._v("#")]),e._v(" children: node")]),e._v(" "),a("p",[e._v("要呈现的"),a("a",{attrs:{href:"https://reactjs.org/docs/react-api.html#react.children.only",target:"_blank",rel:"noopener noreferrer"}},[e._v("单个子元素（组件）"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("h2",{attrs:{id:"switch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#switch","aria-hidden":"true"}},[e._v("#")]),e._v(" Switch")]),e._v(" "),a("p",[e._v("用于渲染与路径匹配的第一个子 "),a("code",[e._v("<Route>")]),e._v(" 或 "),a("code",[e._v("<Redirect>")]),e._v("。")]),e._v(" "),a("p",[e._v("这与仅仅使用一系列 "),a("code",[e._v("<Route>")]),e._v(" 有何不同？")]),e._v(" "),a("p",[a("code",[e._v("<Switch>")]),e._v(" 只会渲染一个路由。相反，仅仅定义一系列 "),a("code",[e._v("<Route>")]),e._v(" 时，每一个与路径匹配的 "),a("code",[e._v("<Route>")]),e._v(" 都将包含在渲染范围内。考虑如下代码：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<Route path="/about" component={About} />\n<Route path="/:user" component={User} />\n<Route component={NoMatch} />\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("如果 URL 是 "),a("code",[e._v("/about")]),e._v("，那么 "),a("code",[e._v("<About>")]),e._v("、"),a("code",[e._v("<User>")]),e._v(" 和 "),a("code",[e._v("<NoMatch>")]),e._v(" 将全部渲染，因为它们都与路径匹配。这是通过设计，允许我们以很多方式将 "),a("code",[e._v("<Route>")]),e._v(" 组合成我们的应用程序，例如侧边栏和面包屑、引导标签等。")]),e._v(" "),a("p",[e._v("但是，有时候我们只想选择一个 "),a("code",[e._v("<Route>")]),e._v(" 来呈现。比如我们在 URL 为 "),a("code",[e._v("/about")]),e._v(" 时不想匹配 "),a("code",[e._v("/:user")]),e._v("（或者显示我们的 404 页面），这该怎么实现呢？以下就是如何使用 "),a("code",[e._v("<Switch>")]),e._v(" 做到这一点：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('import { Switch, Route } from \'react-router\';\n\n<Switch>\n  <Route exact path="/" component={Home} />\n  <Route path="/about" component={About} />\n  <Route path="/:user" component={User} />\n  <Route component={NoMatch} />\n</Switch>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("p",[e._v("现在，当我们在 "),a("code",[e._v("/about")]),e._v(" 路径时，"),a("code",[e._v("<Switch>")]),e._v(" 将开始寻找匹配的 "),a("code",[e._v("<Route>")]),e._v("。我们知道，"),a("code",[e._v('<Route path="/about" />')]),e._v(" 将会被正确匹配，这时 "),a("code",[e._v("<Switch>")]),e._v(" 会停止查找匹配项并立即呈现 "),a("code",[e._v("<About>")]),e._v("。同样，如果我们在 "),a("code",[e._v("/michael")]),e._v(" 路径时，那么 "),a("code",[e._v("<User>")]),e._v("会呈现。")]),e._v(" "),a("p",[e._v("这对于动画转换也很有用，因为匹配的 "),a("code",[e._v("<Route>")]),e._v(" 与前一个渲染位置相同。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<Fade>\n  <Switch>\n    {/* 这里只会渲染一个子元素 */}\n    <Route />\n    <Route />\n  </Switch>\n</Fade>\n\n<Fade>\n  <Route />\n  <Route />\n  {/* 这里总是会渲染两个子元素，也有可能是空渲染，这使得转换更加麻烦 */}\n</Fade>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br")])]),a("h4",{attrs:{id:"location-object-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#location-object-4","aria-hidden":"true"}},[e._v("#")]),e._v(" location: object")]),e._v(" "),a("p",[e._v("用于匹配子元素而不是当前历史位置（通常是当前的浏览器 URL）的 "),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/location",target:"_blank",rel:"noopener noreferrer"}},[e._v("location"),a("OutboundLink")],1),e._v(" 对象。")]),e._v(" "),a("h4",{attrs:{id:"children-node-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#children-node-6","aria-hidden":"true"}},[e._v("#")]),e._v(" children: node")]),e._v(" "),a("p",[e._v("所有 "),a("code",[e._v("<Switch>")]),e._v(" 的子元素都应该是 "),a("code",[e._v("<Route>")]),e._v(" 或 "),a("code",[e._v("<Redirect>")]),e._v("。只有第一个匹配当前路径的子元素将被呈现。")]),e._v(" "),a("p",[a("code",[e._v("<Route>")]),e._v(" 组件使用 "),a("code",[e._v("path")]),e._v(" 属性进行匹配，而 "),a("code",[e._v("<Redirect>")]),e._v(" 组件使用它们的 "),a("code",[e._v("from")]),e._v(" 属性进行匹配。没有 "),a("code",[e._v("path")]),e._v(" 属性的 "),a("code",[e._v("<Route>")]),e._v(" 或者没有 "),a("code",[e._v("from")]),e._v(" 属性的 "),a("code",[e._v("<Redirect>")]),e._v(" 将始终与当前路径匹配。")]),e._v(" "),a("p",[e._v("当在 "),a("code",[e._v("<Switch>")]),e._v(" 中包含 "),a("code",[e._v("<Redirect>")]),e._v(" 时，你可以使用任何 "),a("code",[e._v("<Route>")]),e._v(" 拥有的路径匹配属性："),a("code",[e._v("path")]),e._v("、"),a("code",[e._v("exact")]),e._v(" 和 "),a("code",[e._v("strict")]),e._v("。"),a("code",[e._v("from")]),e._v(" 只是 "),a("code",[e._v("path")]),e._v(" 的别名。")]),e._v(" "),a("p",[e._v("如果给 "),a("code",[e._v("<Switch>")]),e._v(" 提供一个 "),a("code",[e._v("location")]),e._v(" 属性，它将覆盖匹配的子元素上的 "),a("code",[e._v("location")]),e._v(" 属性。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<Switch>\n  <Route exact path="/" component={Home} />\n  <Route path="/users" component={Users} />\n  <Redirect from="/accounts" to="/users" />\n  <Route component={NoMatch} />\n</Switch>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("h2",{attrs:{id:"history"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#history","aria-hidden":"true"}},[e._v("#")]),e._v(" history")]),e._v(" "),a("p",[e._v("本文档中的术语 "),a("code",[e._v("history")]),e._v(" 指的是 "),a("a",{attrs:{href:"https://github.com/ReactTraining/history",target:"_blank",rel:"noopener noreferrer"}},[e._v("history"),a("OutboundLink")],1),e._v(" 包，它是 React Router 的两个主要依赖之一（除了 React 本身），并且提供了几种不同的实现方式，用于在各种环境中管理 JavaScript 中的会话历史。")]),e._v(" "),a("p",[e._v("以下术语我们会经常使用：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("browser history")]),e._v(" - 针对 DOM 环境，用于支持 HTML5 history API 的浏览器")]),e._v(" "),a("li",[a("code",[e._v("hash history")]),e._v(" - 针对 DOM 环境，用于传统的旧式（低版本） 浏览器")]),e._v(" "),a("li",[a("code",[e._v("memory history")]),e._v(" - "),a("code",[e._v("history")]),e._v(" 在内存上的实现，用于测试以及 React Native 等非 DOM 环境")])]),e._v(" "),a("p",[a("code",[e._v("history")]),e._v(" 对象通常具有以下属性和方法：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("length")]),e._v(" - number 历史堆栈中的条目数")]),e._v(" "),a("li",[a("code",[e._v("action")]),e._v(" - string 当前的导航操作（"),a("code",[e._v("push")]),e._v("、"),a("code",[e._v("replace")]),e._v(" 或 "),a("code",[e._v("pop")]),e._v("）")]),e._v(" "),a("li",[a("code",[e._v("location")]),e._v(" - object 当前访问的位置信息，可能具有以下属性：\n"),a("ul",[a("li",[a("code",[e._v("pathname")]),e._v(" - string URL 路径")]),e._v(" "),a("li",[a("code",[e._v("search")]),e._v(" - string URL 中的查询字符串")]),e._v(" "),a("li",[a("code",[e._v("hash")]),e._v(" - string URL 中的 hash 片段")]),e._v(" "),a("li",[a("code",[e._v("state")]),e._v(" - object 存储至 "),a("code",[e._v("location")]),e._v(" 中的额外状态数据，仅在 "),a("code",[e._v("browser history")]),e._v(" 和 "),a("code",[e._v("memory history")]),e._v(" 中有效。")])])]),e._v(" "),a("li",[a("code",[e._v("push(path, [state])")]),e._v(" - function 将一个新条目推入到历史堆栈中 用于跳转的方法 state 为传递的参数")]),e._v(" "),a("li",[a("code",[e._v("replace(path, [state])")]),e._v(" - function 替换历史堆栈中的当前条目")]),e._v(" "),a("li",[a("code",[e._v("go(n)")]),e._v(" - function 将历史堆栈中的指针移动 n 个条目")]),e._v(" "),a("li",[a("code",[e._v("goBack()")]),e._v(" - function 返回到上一个页面，相当于 go(-1)")]),e._v(" "),a("li",[a("code",[e._v("goForward()")]),e._v(" - function 进入到下一个页面，相当于 go(1)")]),e._v(" "),a("li",[a("code",[e._v("block(prompt)")]),e._v(" - function 阻止导航（请参阅 "),a("a",{attrs:{href:"https://github.com/ReactTraining/history#blocking-transitions",target:"_blank",rel:"noopener noreferrer"}},[e._v("history"),a("OutboundLink")],1),e._v(" 文档）")])]),e._v(" "),a("h4",{attrs:{id:"history-is-mutable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#history-is-mutable","aria-hidden":"true"}},[e._v("#")]),e._v(" history is mutable")]),e._v(" "),a("p",[a("code",[e._v("history")]),e._v(" 对象是可变的。因此建议从 "),a("code",[e._v("<Route>")]),e._v(" 渲染组件时接收的属性中直接访问 "),a("code",[e._v("location")]),e._v("，而不是通过 "),a("code",[e._v("history.location")]),e._v(" 进行访问。这样可以保证 React 在生命周期中的钩子函数正常执行。例如：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("class Comp extends React.Component {\n  componentWillReceiveProps(nextProps) {\n    // locationChanged 会是 true\n    const locationChanged = nextProps.location !== this.props.location;\n\n    // 错误，locationChanged 永远是 false，因为 history 是可变的。\n    const locationChanged = nextProps.history.location !== this.props.history.location;\n  }\n}\n\n<Route component={Comp} />\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br")])]),a("p",[e._v("根据你使用的实现方式，还可能存在其它属性。有关详细信息，请参阅 "),a("a",{attrs:{href:"https://github.com/ReactTraining/history#properties",target:"_blank",rel:"noopener noreferrer"}},[e._v("history"),a("OutboundLink")],1),e._v(" 文档。")]),e._v(" "),a("h2",{attrs:{id:"location"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#location","aria-hidden":"true"}},[e._v("#")]),e._v(" location")]),e._v(" "),a("p",[a("code",[e._v("location")]),e._v(" 代表应用程序的位置。如当前的位置，将要去的位置，或是之前所在的位置。它看起来像这样：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("{\n  key: 'ac3df4', // 使用 hash history 时，没有这个属性\n  pathname: '/somewhere'\n  search: '?some=search-string',\n  hash: '#howdy',\n  state: {\n    [userDefined]: true\n  }\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br")])]),a("p",[e._v("Router 将在以下几个地方为您提供一个 "),a("code",[e._v("location")]),e._v(" 对象：")]),e._v(" "),a("ul",[a("li",[e._v("在 "),a("code",[e._v("Route component")]),e._v(" 中，以 "),a("code",[e._v("this.props.location")]),e._v(" 方式获取")]),e._v(" "),a("li",[e._v("在 "),a("code",[e._v("Route render")]),e._v(" 中，以 "),a("code",[e._v("({ location }) => ()")]),e._v(" 方式获取")]),e._v(" "),a("li",[e._v("在 "),a("code",[e._v("Route children")]),e._v(" 中，以 "),a("code",[e._v("({ location }) => ()")]),e._v(" 方式获取")]),e._v(" "),a("li",[e._v("在 "),a("code",[e._v("withRouter")]),e._v(" 中，以 "),a("code",[e._v("this.props.location")]),e._v(" 方式获取")])]),e._v(" "),a("p",[a("code",[e._v("location")]),e._v(" 对象永远不会发生改变，因此可以在生命周期钩子函数中使用 "),a("code",[e._v("location")]),e._v(" 对象来查看当前访问地址是否发生改变。这种技巧在获取远程数据以及使用动画时非常有用。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("componentWillReceiveProps(nextProps) {\n  if (nextProps.location !== this.props.location) {\n    // 已经跳转了！\n  }\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("可以在以下不同情境中使用 "),a("code",[e._v("location")]),e._v("：")]),e._v(" "),a("ul",[a("li",[e._v("Web "),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/Link",target:"_blank",rel:"noopener noreferrer"}},[e._v("link"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("React Native "),a("a",{attrs:{href:"https://reacttraining.com/react-router/native/api/Link",target:"_blank",rel:"noopener noreferrer"}},[e._v("link"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/Redirect",target:"_blank",rel:"noopener noreferrer"}},[e._v("redirect"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/history",target:"_blank",rel:"noopener noreferrer"}},[e._v("history.push(location)"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/history",target:"_blank",rel:"noopener noreferrer"}},[e._v("history.replace(location)"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("通常情况下只是使用一个字符串，但是如果你需要添加一些额外的 "),a("code",[e._v("state")]),e._v("，以在应用程序跳转到特定位置时可以使用，那么你就可以使用 "),a("code",[e._v("location")]),e._v(" 对象。如果你想根据导航历史而不是路径来组织 UI（如模态对话框），这也很有用（见"),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/example/modal-gallery",target:"_blank",rel:"noopener noreferrer"}},[e._v("模态画廊"),a("OutboundLink")],1),e._v("示例）。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// 通常情况下我们这么做\n<Link to=\"/somewhere\" />\n\n// 但是我们可以改为使用 location 对象\nconst location = {\n  pathname: '/somewhere',\n  state: { fromDashboard: true }\n};\n\n<Link to={location} />\n<Redirect to={location} />\nhistory.push(location);\nhistory.replace(location);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br")])]),a("p",[e._v("最终，"),a("code",[e._v("location")]),e._v(" 将传递给以下组件：")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/Route",target:"_blank",rel:"noopener noreferrer"}},[e._v("Route"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/Switch",target:"_blank",rel:"noopener noreferrer"}},[e._v("Switch"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("这将阻止它们在 Router 状态下使用实际位置。这对动画和等待导航非常有用，或者任何时候你想诱导一个组件在不同于真实位置的地方渲染。")]),e._v(" "),a("h2",{attrs:{id:"match"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#match","aria-hidden":"true"}},[e._v("#")]),e._v(" match")]),e._v(" "),a("p",[e._v("一个 "),a("code",[e._v("match")]),e._v(" 对象包含有关 "),a("code",[e._v("<Route path>")]),e._v(" 如何匹配 URL 的信息。它具有以下属性：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("params")]),e._v(" - object 根据 "),a("code",[e._v("path")]),e._v(" 中指定的动态片段，从 URL 中解析出的键值对")]),e._v(" "),a("li",[a("code",[e._v("isExact")]),e._v(" - boolean 如果整个 URL 匹配（不包含尾随字符），则为 "),a("code",[e._v("true")])]),e._v(" "),a("li",[a("code",[e._v("path")]),e._v(" - string 用于匹配的路径模式。可用于构建嵌套的 "),a("code",[e._v("<Route>")])]),e._v(" "),a("li",[a("code",[e._v("url")]),e._v(" - string URL 的匹配部分。可用于构建嵌套的 "),a("code",[e._v("<Link>")])])]),e._v(" "),a("p",[e._v("您可以在以下几个地方访问 "),a("code",[e._v("match")]),e._v(" 对象：")]),e._v(" "),a("ul",[a("li",[e._v("在 "),a("code",[e._v("Route component")]),e._v(" 中，以 "),a("code",[e._v("this.props.match")]),e._v(" 方式获取")]),e._v(" "),a("li",[e._v("在 "),a("code",[e._v("Route render")]),e._v(" 中，以 "),a("code",[e._v("({ match }) => ()")]),e._v(" 方式获取")]),e._v(" "),a("li",[e._v("在 "),a("code",[e._v("Route children")]),e._v(" 中，以 "),a("code",[e._v("({ match }) => ()")]),e._v(" 方式获取")]),e._v(" "),a("li",[e._v("在 "),a("code",[e._v("withRouter")]),e._v(" 中，以 "),a("code",[e._v("this.props.match")]),e._v(" 方式获取")]),e._v(" "),a("li",[a("code",[e._v("matchPath")]),e._v(" 的返回值")])]),e._v(" "),a("p",[e._v("如果 "),a("code",[e._v("<Route>")]),e._v(" 没有定义 "),a("code",[e._v("path")]),e._v("，并因此始终匹配，则会得到最接近的父匹配。"),a("code",[e._v("withRouter")]),e._v(" 也是一样。")]),e._v(" "),a("h4",{attrs:{id:"null-matches"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#null-matches","aria-hidden":"true"}},[e._v("#")]),e._v(" null matches")]),e._v(" "),a("p",[e._v("在 "),a("code",[e._v('<Route path="/somewhere" children={({ match }) => ()} />')]),e._v(" 中，即使 "),a("code",[e._v("path")]),e._v(" 与当前位置不匹配，"),a("code",[e._v("children")]),e._v(" 指定的内联函数也依然会被调用。这种情况下，"),a("code",[e._v("match")]),e._v(" 为 "),a("code",[e._v("null")]),e._v("。能够在不匹配时依然呈现 "),a("code",[e._v("<Route>")]),e._v(" 的内容可能很有用，但是这样会带来一些挑战。")]),e._v(" "),a("p",[e._v("解析 URL 的默认方式是将 "),a("code",[e._v("match.url")]),e._v(" 字符串连接到 relative-path。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("`${match.url}/relative-path`\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("如果你在 "),a("code",[e._v("match")]),e._v(" 为 "),a("code",[e._v("null")]),e._v(" 时尝试执行此操作，最终会出现 "),a("code",[e._v("TypeError")]),e._v(" 错误。这意味着在使用 "),a("code",[e._v("children")]),e._v(" 属性时尝试在 "),a("code",[e._v("<Route>")]),e._v(" 内部连接 relative-path 是不安全的。")]),e._v(" "),a("p",[e._v("当您在产生空匹配对象的 "),a("code",[e._v("<Route>")]),e._v(" 内部使用没有定义 "),a("code",[e._v("path")]),e._v(" 的 "),a("code",[e._v("<Route>")]),e._v(" 时，会出现类似但更微妙的情况。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// location.pathname = '/matches'\n<Route path='/does-not-match' children={({ match }) => (\n  // match === null\n  <Route render={({ match: pathlessMatch }) => (\n    // pathlessMatch === ???\n  )} />\n)} />\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("没有 "),a("code",[e._v("path")]),e._v(" 的 "),a("code",[e._v("<Route>")]),e._v(" 从它的父节点继承 "),a("code",[e._v("match")]),e._v(" 对象。如果它的父匹配为 "),a("code",[e._v("null")]),e._v("，那么它的匹配也将为 "),a("code",[e._v("null")]),e._v("。这意味着：")]),e._v(" "),a("ul",[a("li",[e._v("任何子路由/子链接必须是绝对的")]),e._v(" "),a("li",[e._v("一个没有定义 "),a("code",[e._v("path")]),e._v(" 的 "),a("code",[e._v("<Route>")]),e._v("，它的父匹配可以为 "),a("code",[e._v("null")]),e._v("，但它本身需要使用 "),a("code",[e._v("children")]),e._v(" 来呈现内容。")])]),e._v(" "),a("h2",{attrs:{id:"matchpath"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#matchpath","aria-hidden":"true"}},[e._v("#")]),e._v(" matchPath")]),e._v(" "),a("p",[e._v("在正常的渲染周期之外，你可以使用和 "),a("code",[e._v("<Route>")]),e._v(" 所使用的相同的匹配代码，例如在服务器上呈现之前收集数据依赖关系。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("import { matchPath } from 'react-router';\n\nconst match = matchPath('/users/123', {\n  path: '/users/:id',\n  exact: true,\n  strict: false\n});\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("h4",{attrs:{id:"pathname"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pathname","aria-hidden":"true"}},[e._v("#")]),e._v(" pathname")]),e._v(" "),a("p",[e._v("第一个参数是要匹配的路径名。如果您在服务器上通过 Node.js 使用，它将是 "),a("code",[e._v("req.path")]),e._v("。")]),e._v(" "),a("h4",{attrs:{id:"props"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#props","aria-hidden":"true"}},[e._v("#")]),e._v(" props")]),e._v(" "),a("p",[e._v("第二个参数是匹配的属性，它们与 "),a("code",[e._v("<Route>")]),e._v(" 接受的匹配属性相同：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("{\n  path, // 例如 /users/:id\n  strict, // 可选，默认为 false\n  exact // 可选，默认为false\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h2",{attrs:{id:"withrouter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#withrouter","aria-hidden":"true"}},[e._v("#")]),e._v(" withRouter")]),e._v(" "),a("p",[e._v("你可以通过 "),a("code",[e._v("withRouter")]),e._v(" 高阶组件访问 "),a("code",[e._v("history")]),e._v(" 对象的属性和最近（UI 结构上靠的最近）的 "),a("code",[e._v("<Route>")]),e._v(" 的 "),a("code",[e._v("match")]),e._v(" 对象。当组件渲染时，"),a("code",[e._v("withRouter")]),e._v(" 会将更新后的 "),a("code",[e._v("match")]),e._v("、"),a("code",[e._v("location")]),e._v(" 和 "),a("code",[e._v("history")]),e._v(" 传递给它。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\n\n// 显示当前位置的 pathname 的简单组件\nclass ShowTheLocation extends React.Component {\n  static propTypes = {\n    match: PropTypes.object.isRequired,\n    location: PropTypes.object.isRequired,\n    history: PropTypes.object.isRequired\n  }\n\n  render() {\n    const { match, location, history } = this.props;\n\n    return (\n      <div>You are now at {location.pathname}</div>\n    );\n  }\n}\n\n// 创建一个连接到 Router 的新组件（借用 redux 术语）\nconst ShowTheLocationWithRouter = withRouter(ShowTheLocation)\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br")])]),a("p",[e._v("注意：withRouter 不会订阅位置更改，如 React Redux 的 connect 对状态更改所做的更改。而是在位置更改从 "),a("Router",[e._v(" 组件传播出去之后重新呈现。这意味着除非其父组件重新呈现，否则使用 withRouter 不会在路由转换时重新呈现。如果使用 withRouter 来防止更新被 shouldComponentUpdate 阻塞，那么使用 router 包装实现 shouldComponentUpdate 的组件是非常重要的。例如，使用 Redux 时：")])],1),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// This gets around shouldComponentUpdate\nwithRouter(connect(...)(MyComponent))\n// or\ncompose(\n  withRouter,\n  connect(...)\n)(MyComponent)\n\n// This does not\nconnect(...)(withRouter(MyComponent))\n// nor\ncompose(\n  connect(...),\n  withRouter\n)(MyComponent)\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br")])]),a("p",[e._v("有关更多信息，请参阅"),a("a",{attrs:{href:"https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/guides/blocked-updates.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("本指南"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("p",[e._v("静态方法和属性")]),e._v(" "),a("p",[e._v("封装组件的所有无反应的特定静态方法和属性都会自动复制到 connected 组件。")]),e._v(" "),a("h4",{attrs:{id:"component-wrappedcomponent"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#component-wrappedcomponent","aria-hidden":"true"}},[e._v("#")]),e._v(" Component.WrappedComponent")]),e._v(" "),a("p",[e._v("被包装的组件被公开为返回组件上的静态属性 "),a("code",[e._v("WrappedComponent")]),e._v("，它可用于隔离测试组件等等。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// MyComponent.js\nexport default withRouter(MyComponent);\n\n// MyComponent.test.js\nimport MyComponent from './MyComponent';\n\nrender(<MyComponent.WrappedComponent location={{...}} ... />);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("h4",{attrs:{id:"wrappedcomponentref-func"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wrappedcomponentref-func","aria-hidden":"true"}},[e._v("#")]),e._v(" wrappedComponentRef: func")]),e._v(" "),a("p",[e._v("一个将作为 "),a("code",[e._v("ref")]),e._v(" 属性传递给包装组件的函数。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("class Container extends React.Component {\n  componentDidMount() {\n    this.component.doSomething();\n  }\n\n  render() {\n    return (\n      <MyComponent wrappedComponentRef={c => this.component = c} />\n    )\n  }\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br")])])])},[],!1,null,null,null);t.default=n.exports}}]);